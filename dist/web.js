function e(e){return Object.keys(e).reduce(((t,r)=>{var n=e[r];return t[r]=Object.assign({},n),!o(n.value)||function(e){return"[object Function]"===Object.prototype.toString.call(e)}(n.value)||Array.isArray(n.value)||(t[r].value=Object.assign({},n.value)),Array.isArray(n.value)&&(t[r].value=n.value.slice(0)),t}),{})}function t(e){if(e)try{return JSON.parse(e)}catch(t){return e}}function r(e,t,r){if(null==r||!1===r)return e.removeAttribute(t);let o=JSON.stringify(r);e.__updating[t]=!0,"true"===o&&(o=""),e.setAttribute(t,o),Promise.resolve().then((()=>delete e.__updating[t]))}function o(e){return null!=e&&("object"==typeof e||"function"==typeof e)}let n;function i(o,i){const s=Object.keys(i);return class extends o{static get observedAttributes(){return s.map((e=>i[e].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(!this.__initialized){this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(o,n){const i=e(n);return Object.keys(n).forEach((e=>{const n=i[e],s=o.getAttribute(n.attribute),a=o[e];s&&(n.value=n.parse?t(s):s),null!=a&&(n.value=Array.isArray(a)?a.slice(0):a),n.reflect&&r(o,n.attribute,n.value),Object.defineProperty(o,e,{get:()=>n.value,set(t){var o=n.value;n.value=t,n.reflect&&r(this,n.attribute,n.value);for(let r=0,n=this.__propertyChangedCallbacks.length;r<n;r++)this.__propertyChangedCallbacks[r](e,t,o)},enumerable:!0,configurable:!0})})),i}(this,i);var o=function(e){return Object.keys(e).reduce(((t,r)=>(t[r]=e[r].value,t)),{})}(this.props),s=this.Component,a=n;try{(n=this).__initialized=!0,function(e){return"function"==typeof e&&0===e.toString().indexOf("class")}(s)?new s(o,{element:this}):s(o,{element:this})}finally{n=a}}}async disconnectedCallback(){if(await Promise.resolve(),!this.isConnected){this.__propertyChangedCallbacks.length=0;for(var e=null;e=this.__releaseCallbacks.pop();)e(this);delete this.__initialized,this.__released=!0}}attributeChangedCallback(e,r,o){!this.__initialized||this.__updating[e]||(e=this.lookupProp(e))in i&&(null==o&&!this[e]||(this[e]=i[e].parse?t(o):o))}lookupProp(e){if(i)return s.find((t=>e===t||e===i[t].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(e){this.__releaseCallbacks.push(e)}addPropertyChangedCallback(e){this.__propertyChangedCallbacks.push(e)}}}function s(e,t={},r={}){const{BaseElement:n=HTMLElement,extension:s}=r;return r=>{if(!e)throw new Error("tag is required to register a Component");let a=customElements.get(e);return a?a.prototype.Component=r:((a=i(n,function(e){return e?Object.keys(e).reduce(((t,r)=>{var n=e[r];return t[r]=o(n)&&"value"in n?n:{value:n},t[r].attribute||(t[r].attribute=function(e){return e.replace(/\.?([A-Z]+)/g,((e,t)=>"-"+t.toLowerCase())).replace("_","-").replace(/^-/,"")}(r)),t[r].parse="parse"in t[r]?t[r].parse:"string"!=typeof t[r].value,t}),{}):{}}(t))).prototype.Component=r,a.prototype.registeredTag=e,customElements.define(e,a,s)),a}}const a=Symbol("solid-proxy"),l=Symbol("solid-track"),c={equals:(e,t)=>e===t};let d=M;const h=1,u=2,p={owned:null,cleanups:null,context:null,owner:null};var f=null;let g=null,m=null,b=null,w=null,v=0;function y(e,t){const r=m,o=f,n=0===e.length,i=n?p:{owned:null,cleanups:null,context:null,owner:void 0===t?o:t},s=n?e:()=>e((()=>S((()=>I(i)))));f=i,m=null;try{return O(s,!0)}finally{m=r,f=o}}function k(e,t){const r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},c,t):c).equals||void 0};return[_.bind(r),e=>("function"==typeof e&&(e=e(r.value)),L(r,e))]}function x(e,t,r){P(E(e,t,!1,h))}function R(e,t,r){d=$,(e=E(e,t,!1,h)).user=!0,w?w.push(e):P(e)}function C(e,t,r){return r=r?Object.assign({},c,r):c,(e=E(e,t,!0,0)).observers=null,e.observerSlots=null,e.comparator=r.equals||void 0,P(e),_.bind(e)}function S(e){if(null===m)return e();var t=m;m=null;try{return e()}finally{m=t}}function T(e){R((()=>S(e)))}function A(e){return null!==f&&(null===f.cleanups?f.cleanups=[e]:f.cleanups.push(e)),e}function _(){var e;return this.sources&&this.state&&(this.state===h?P(this):(e=b,b=null,O((()=>D(this)),!1),b=e)),m&&(e=this.observers?this.observers.length:0,m.sources?(m.sources.push(this),m.sourceSlots.push(e)):(m.sources=[this],m.sourceSlots=[e]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])),this.value}function L(e,t,r){var o=e.value;return e.comparator&&e.comparator(o,t)||(e.value=t,e.observers&&e.observers.length&&O((()=>{for(let o=0;o<e.observers.length;o+=1){var t=e.observers[o],r=g&&g.running;r&&g.disposed.has(t),(r?t.tState:t.state)||((t.pure?b:w).push(t),t.observers&&U(t)),r||(t.state=h)}if(1e6<b.length)throw b=[],new Error}),!1)),t}function P(e){var t,r,o;e.fn&&(I(e),t=f,r=m,o=v,function(e,t,r){let o;try{o=e.fn(t)}catch(t){return e.pure&&(e.state=h,e.owned&&e.owned.forEach(I),e.owned=null),e.updatedAt=r+1,j(t)}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?L(e,o):e.value=o,e.updatedAt=r)}(m=f=e,e.value,o),m=r,f=t)}function E(e,t,r,o=h,n){return e={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:f,context:null,pure:r},null!==f&&f!==p&&(f.owned?f.owned.push(e):f.owned=[e]),e}function B(e){if(0!==e.state){if(e.state===u)return D(e);if(e.suspense&&S(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<v);)e.state&&r.push(e);for(let o=r.length-1;0<=o;o--){var t;(e=r[o]).state===h?P(e):e.state===u&&(t=b,b=null,O((()=>D(e,r[0])),!1),b=t)}}}function O(e,t){if(b)return e();let r=!1;t||(b=[]),w?r=!0:w=[],v++;try{var o=e();return function(e){if(b&&(M(b),b=null),!e){const e=w;w=null,e.length&&O((()=>d(e)),!1)}}(r),o}catch(e){r||(w=null),b=null,j(e)}}function M(e){for(let t=0;t<e.length;t++)B(e[t])}function $(e){let t,r=0;for(t=0;t<e.length;t++){var o=e[t];o.user?e[r++]=o:B(o)}for(t=0;t<r;t++)B(e[t])}function D(e,t){for(let n=e.state=0;n<e.sources.length;n+=1){var r,o=e.sources[n];o.sources&&((r=o.state)===h?o!==t&&(!o.updatedAt||o.updatedAt<v)&&B(o):r===u&&D(o,t))}}function U(e){for(let r=0;r<e.observers.length;r+=1){var t=e.observers[r];t.state||(t.state=u,(t.pure?b:w).push(t),t.observers&&U(t))}}function I(e){let t;if(e.sources)for(;e.sources.length;){var r,o,n=e.sources.pop(),i=e.sourceSlots.pop(),s=n.observers;s&&s.length&&(r=s.pop(),o=n.observerSlots.pop(),i<s.length)&&(s[r.sourceSlots[o]=i]=r,n.observerSlots[i]=o)}if(e.owned){for(t=e.owned.length-1;0<=t;t--)I(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;0<=t;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function j(e){throw e}const N=Symbol("fallback");function z(e){for(let t=0;t<e.length;t++)e[t]()}function q(e,t){return S((()=>e(t||{})))}function F(){return!0}const G={get:(e,t,r)=>t===a?r:e.get(t),has:(e,t)=>t===a||e.has(t),set:F,deleteProperty:F,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:F,deleteProperty:F}),ownKeys:e=>e.keys()};function H(e){return(e="function"==typeof e?e():e)||{}}function W(...e){let t=!1;for(let o=0;o<e.length;o++){var r=e[o];t=t||!!r&&a in r,e[o]="function"==typeof r?(t=!0,C(r)):r}if(t)return new Proxy({get(t){for(let o=e.length-1;0<=o;o--){var r=H(e[o])[t];if(void 0!==r)return r}},has(t){for(let r=e.length-1;0<=r;r--)if(t in H(e[r]))return!0;return!1},keys(){var t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(H(e[r])));return[...new Set(t)]}},G);var o={};for(let t=e.length-1;0<=t;t--)if(e[t])for(const r in Object.getOwnPropertyDescriptors(e[t]))r in o||Object.defineProperty(o,r,{enumerable:!0,get(){for(let o=e.length-1;0<=o;o--){var t=(e[o]||{})[r];if(void 0!==t)return t}}});return o}function V(e,...t){const r=new Set(t.flat());var o;if(a in e)return(o=t.map((t=>new Proxy({get:r=>t.includes(r)?e[r]:void 0,has:r=>t.includes(r)&&r in e,keys:()=>t.filter((t=>t in e))},G)))).push(new Proxy({get:t=>r.has(t)?void 0:e[t],has:t=>!r.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!r.has(e)))},G)),o;const n=Object.getOwnPropertyDescriptors(e);return t.push(Object.keys(n).filter((e=>!r.has(e)))),t.map((t=>{var r={};for(let o=0;o<t.length;o++){const i=t[o];i in e&&Object.defineProperty(r,i,n[i]||{get:()=>e[i],set:()=>!0,enumerable:!0})}return r}))}const Y=e=>`Stale read from <${e}>.`;function J(e){var t="fallback"in e&&{fallback:()=>e.fallback};return C(function(e,t,r={}){let o=[],n=[],i=[],s=0,a=1<t.length?[]:null;return A((()=>z(i))),()=>{let c,d,h=e()||[];return h[l],S((()=>{let e,t,l,p,f,g,m,b,w,v=h.length;if(0===v)0!==s&&(z(i),i=[],o=[],n=[],s=0,a=a&&[]),r.fallback&&(o=[N],n[0]=y((e=>(i[0]=e,r.fallback()))),s=1);else if(0===s){for(n=new Array(v),d=0;d<v;d++)o[d]=h[d],n[d]=y(u);s=v}else{for(l=new Array(v),p=new Array(v),a&&(f=new Array(v)),g=0,m=Math.min(s,v);g<m&&o[g]===h[g];g++);for(m=s-1,b=v-1;m>=g&&b>=g&&o[m]===h[b];m--,b--)l[b]=n[m],p[b]=i[m],a&&(f[b]=a[m]);for(e=new Map,t=new Array(b+1),d=b;d>=g;d--)w=h[d],c=e.get(w),t[d]=void 0===c?-1:c,e.set(w,d);for(c=g;c<=m;c++)w=o[c],void 0!==(d=e.get(w))&&-1!==d?(l[d]=n[c],p[d]=i[c],a&&(f[d]=a[c]),d=t[d],e.set(w,d)):i[c]();for(d=g;d<v;d++)d in l?(n[d]=l[d],i[d]=p[d],a&&(a[d]=f[d],a[d](d))):n[d]=y(u);n=n.slice(0,s=v),o=h.slice(0)}return n}));function u(e){var r;return i[d]=e,a?([e,r]=k(d),a[d]=r,t(h[d],e)):t(h[d])}}}((()=>e.each),e.children,t||void 0))}function X(e){const t=e.keyed,r=C((()=>e.when),void 0,{equals:(e,r)=>t?e===r:!e==!r});return C((()=>{const o=r();if(o){const n=e.children;return"function"==typeof n&&0<n.length?S((()=>n(t?o:()=>{if(S(r))return e.when;throw Y("Show")}))):n}return e.fallback}),void 0,void 0)}const K=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),Q=new Set(["innerHTML","textContent","innerText","children"]),Z=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ee=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});const te=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),re={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};const oe="_$DX_DELEGATE";function ne(e,t,r){let o;const n=()=>{var t=document.createElement("template");return t.innerHTML=e,(r?t.content.firstChild:t.content).firstChild};return(t=t?()=>(o=o||n()).cloneNode(!0):()=>S((()=>document.importNode(o=o||n(),!0)))).cloneNode=t}function ie(e,t=window.document){var r=t[oe]||(t[oe]=new Set);for(let n=0,i=e.length;n<i;n++){var o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,pe))}}function se(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function ae(e,t){null==t?e.removeAttribute("class"):e.className=t}function le(e,t={},r,o){const n={};return o||x((()=>n.children=fe(e,t.children,n.children))),x((()=>t.ref&&t.ref(e))),x((()=>function(e,t,r,o,n={},i=!1){t=t||{};for(const o in n)o in t||"children"!==o&&(n[o]=ue(e,o,null,n[o],r,i));for(const a in t){var s;"children"===a?o||fe(e,t.children):(s=t[a],n[a]=ue(e,a,s,n[a],r,i))}}(e,t,r,!0,n,!0))),n}function ce(e,t,r){return S((()=>e(t,r)))}function de(e,t,r,o){if(void 0!==r&&(o=o||[]),"function"!=typeof t)return fe(e,t,o,r);x((o=>fe(e,t(),o,r)),o)}function he(e,t,r){var o=t.trim().split(/\s+/);for(let t=0,n=o.length;t<n;t++)e.classList.toggle(o[t],r)}function ue(e,t,r,o,n,i){let s,a,l,c,d;var h;return"style"===t?function(e,t,r){if(!t)return r?se(e,"style"):t;var o=e.style;if("string"==typeof t)return o.cssText=t;let n,i;for(i in"string"==typeof r&&(o.cssText=r=void 0),t=t||{},r=r||{})null==t[i]&&o.removeProperty(i),delete r[i];for(i in t)(n=t[i])!==r[i]&&(o.setProperty(i,n),r[i]=n);return r}(e,r,o):"classList"===t?function(e,t,r={}){var o=Object.keys(t||{}),n=Object.keys(r);let i,s;for(i=0,s=n.length;i<s;i++){var a=n[i];a&&"undefined"!==a&&!t[a]&&(he(e,a,!1),delete r[a])}for(i=0,s=o.length;i<s;i++){var l=o[i],c=!!t[l];l&&"undefined"!==l&&r[l]!==c&&c&&(he(e,l,!0),r[l]=c)}return r}(e,r,o):r===o?o:("ref"===t?i||r(e):"on:"===t.slice(0,3)?(i=t.slice(3),o&&e.removeEventListener(i,o),r&&e.addEventListener(i,r)):"oncapture:"===t.slice(0,10)?(i=t.slice(10),o&&e.removeEventListener(i,o,!0),r&&e.addEventListener(i,r,!0)):"on"===t.slice(0,2)?(i=t.slice(2).toLowerCase(),!(h=te.has(i))&&o&&(o=Array.isArray(o)?o[0]:o,e.removeEventListener(i,o)),(h||r)&&(function(e,t,r,o){if(o)Array.isArray(r)?(e["$$"+t]=r[0],e[`$$${t}Data`]=r[1]):e["$$"+t]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=t=>o.call(e,r[1],t))}else e.addEventListener(t,r)}(e,i,r,h),h)&&ie([i])):"attr:"===t.slice(0,5)?se(e,t.slice(5),r):(d="prop:"===t.slice(0,5))||(l=Q.has(t))||!n&&((c=function(e,t){return"object"==typeof(e=ee[e])?e[t]?e.$:void 0:e}(t,e.tagName))||(a=K.has(t)))||(s=e.nodeName.includes("-"))?(d&&(t=t.slice(5),a=!0),"class"===t||"className"===t?ae(e,r):!s||a||l?e[c||t]=r:e[function(e){return e.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))}(t)]=r):(o=n&&-1<t.indexOf(":")&&re[t.split(":")[0]])?function(e,t,r,o){null==o?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,o)}(e,o,t,r):se(e,Z[t]||t,r),r)}function pe(e){var t="$$"+e.type;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document});r;){var o=r[t];if(o&&!r.disabled){var n=r[t+"Data"];if(void 0!==n?o.call(r,n,e):o.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function fe(e,t,r,o,n){for(;"function"==typeof r;)r=r();if(t!==r){var i=typeof t,s=void 0!==o;if(e=s&&r[0]&&r[0].parentNode||e,"string"==i||"number"==i)if("number"==i&&(t=t.toString()),s){let n=r[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),r=be(e,r,o,n)}else r=""!==r&&"string"==typeof r?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"==i)r=be(e,r,o);else{if("function"==i)return x((()=>{let n=t();for(;"function"==typeof n;)n=n();r=fe(e,n,r,o)})),()=>r;if(Array.isArray(t)){const a=[];if(i=r&&Array.isArray(r),ge(a,t,r,n))return x((()=>r=fe(e,a,r,o,!0))),()=>r;if(0===a.length){if(r=be(e,r,o),s)return r}else i?0===r.length?me(e,a,o):function(e,t,r){let o=r.length,n=t.length,i=o,s=0,a=0,l=t[n-1].nextSibling,c=null;for(;s<n||a<i;)if(t[s]===r[a])s++,a++;else{for(;t[n-1]===r[i-1];)n--,i--;if(n===s)for(var d=i<o?a?r[a-1].nextSibling:r[i-a]:l;a<i;)e.insertBefore(r[a++],d);else if(i===a)for(;s<n;)c&&c.has(t[s])||t[s].remove(),s++;else if(t[s]===r[i-1]&&r[a]===t[n-1]){var h=t[--n].nextSibling;e.insertBefore(r[a++],t[s++].nextSibling),e.insertBefore(r[--i],h),t[n]=r[i]}else{if(!c){c=new Map;let e=a;for(;e<i;)c.set(r[e],e++)}var u=c.get(t[s]);if(null!=u)if(a<u&&u<i){let o,l=s,d=1;for(;++l<n&&l<i&&null!=(o=c.get(t[l]))&&o===u+d;)d++;if(d>u-a)for(var p=t[s];a<u;)e.insertBefore(r[a++],p);else e.replaceChild(r[a++],t[s++])}else s++;else t[s++].remove()}}}(e,r,a):(r&&be(e),me(e,a));r=a}else if(t instanceof Node){if(Array.isArray(r)){if(s)return r=be(e,r,o,t);be(e,r,null,t)}else null!=r&&""!==r&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}}return r}function ge(e,t,r,o){let n=!1;for(let s=0,a=t.length;s<a;s++){let a=t[s],l=r&&r[s];if(a instanceof Node)e.push(a);else if(null!=a&&!0!==a&&!1!==a)if(Array.isArray(a))n=ge(e,a,l)||n;else if("function"==typeof a)if(o){for(;"function"==typeof a;)a=a();n=ge(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||n}else e.push(a),n=!0;else{var i=String(a);l&&3===l.nodeType?(l.data=i,e.push(l)):e.push(document.createTextNode(i))}}return n}function me(e,t,r=null){for(let o=0,n=t.length;o<n;o++)e.insertBefore(t[o],r)}function be(e,t,r,o){if(void 0===r)return e.textContent="";var n=o||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;0<=a;a--){var i,s=t[a];n!==s?(i=s.parentNode===e,o||a?i&&s.remove():i?e.replaceChild(n,s):e.insertBefore(n,r)):o=!0}}else e.insertBefore(n,r);return[n]}function we(e){return(t,r)=>{const o=r.element;return y((n=>{const i=function(e){var t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const[n,i]=k(e[t[o]]);Object.defineProperty(r,t[o],{get:n,set(e){i((()=>e))}})}return r}(t);o.addPropertyChangedCallback(((e,t)=>i[e]=t)),o.addReleaseCallback((()=>{o.renderRoot.textContent="",n()}));var s=e(i,r);return de(o.renderRoot,s)}),function(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&(!t.assignedSlot||!t.assignedSlot._$owner);)t=t.parentNode;return(t&&t.assignedSlot?t.assignedSlot:e)._$owner}(o))}}function ve(e,t,r){return 2===arguments.length&&(r=t,t={}),s(e,t)(we(r))}const ye={chatflowid:"",apiHost:void 0,chatflowConfig:void 0,theme:void 0,observersConfig:void 0};var ke='/*! tailwindcss v3.3.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-left:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-left:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-left-color:var(--tw-prose-quote-borders);border-left-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-left:1em;quotes:"\\201C""\\201D""\\2018""\\2019"}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-bottom:2em;margin-top:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px 0 rgb(var(--tw-prose-kbd-shadows)/10%);color:var(--tw-prose-kbd);font-family:inherit;font-size:.875em;font-weight:500;padding:.1875em .375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding:.8571429em 1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;text-align:left;width:100%}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-bottom:.5714286em;padding-left:.5714286em;padding-right:.5714286em;vertical-align:bottom}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(.prose>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-left:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-right:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-right:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-20{bottom:80px}.bottom-24{bottom:96px}.left-0{left:0}.top-0{top:0}.z-10{z-index:10}.my-2{margin-bottom:8px;margin-top:8px}.-ml-1{margin-left:-4px}.mb-2{margin-bottom:8px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.block{display:block}.flex{display:flex}.hidden{display:none}.h-1{height:4px}.h-10{height:40px}.h-12{height:48px}.h-16{height:64px}.h-2{height:8px}.h-32{height:128px}.h-5{height:20px}.h-6{height:24px}.h-7{height:28px}.h-9{height:36px}.h-full{height:100%}.max-h-\\[704px\\]{max-height:704px}.min-h-full{min-height:100%}.w-1{width:4px}.w-10{width:40px}.w-12{width:48px}.w-16{width:64px}.w-2{width:8px}.w-5{width:20px}.w-6{width:24px}.w-7{width:28px}.w-9{width:36px}.w-full{width:100%}.min-w-full{min-width:100%}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}.animate-ping{animation:ping 1s cubic-bezier(0,0,.2,1) infinite}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.place-self-center{place-self:center}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.whitespace-pre-wrap{white-space:pre-wrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.border{border-width:1px}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-cover{background-size:cover}.bg-center{background-position:50%}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-4{padding:16px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-4{padding-bottom:16px;padding-top:16px}.pt-10{padding-top:40px}.text-left{text-align:left}.text-center{text-align:center}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}:host{--chatbot-container-bg-image:none;--chatbot-container-bg-color:transparent;--chatbot-container-font-family:"Open Sans";--chatbot-button-bg-color:#0042da;--chatbot-button-color:#fff;--chatbot-host-bubble-bg-color:#f7f8ff;--chatbot-host-bubble-color:#303235;--chatbot-guest-bubble-bg-color:#3b81f6;--chatbot-guest-bubble-color:#fff;--chatbot-input-bg-color:#fff;--chatbot-input-color:#303235;--chatbot-input-placeholder-color:#9095a0;--chatbot-header-bg-color:#fff;--chatbot-header-color:#303235;--chatbot-border-radius:6px;--PhoneInputCountryFlag-borderColor:transparent;--PhoneInput-color--focus:transparent}a{color:#16bed7;font-weight:500}a:hover{text-decoration:underline}pre{word-wrap:break-word;font-size:13px;margin:5px;overflow:auto;padding:5px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;width:auto}.string{color:green}.number{color:#ff8c00}.boolean{color:blue}.null{color:#f0f}.key{color:#002b36}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--chatbot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}.slate-a{text-decoration:underline}.slate-html-container>div{min-height:24px}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:#9095a0!important;opacity:1!important}.text-input::placeholder{color:#9095a0!important;opacity:1!important}.chatbot-container{background-color:var(--chatbot-container-bg-color);background-image:var(--chatbot-container-bg-image);font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.file-annotation-button{background-color:#02a0a0c2;border:1px solid #02a0a0c2;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button{background-color:#0042da;border:1px solid #0042da;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button.selectable{border:1px solid #0042da}.chatbot-button.selectable,.chatbot-host-bubble{background-color:#f7f8ff;color:var(--chatbot-host-bubble-color)}.chatbot-host-bubble>.bubble-typing{background-color:#f7f8ff;border:var(--chatbot-host-bubble-border);border-radius:6px}.chatbot-host-bubble iframe,.chatbot-host-bubble img,.chatbot-host-bubble video{border-radius:var(--chatbot-border-radius)}.chatbot-guest-bubble{background-color:#3b81f6;border-radius:6px;color:var(--chatbot-guest-bubble-color)}.chatbot-input{background-color:#fff;border-radius:var(--chatbot-border-radius);box-shadow:0 2px 6px -1px rgba(0,0,0,.1);color:#303235}.chatbot-input-error-message{color:#303235}.chatbot-button>.send-icon{fill:var(--chatbot-button-color)}.chatbot-chat-view{max-width:800px}.ping span{background-color:#0042da}.rating-icon-container svg{stroke:#0042da;fill:#f7f8ff;height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:#0042da}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{background-color:#0042da;border-radius:var(--chatbot-border-radius)}.total-files-indicator{background-color:#0042da;color:var(--chatbot-button-color);font-size:10px}.chatbot-upload-input{transition:border-color .1s ease-out}.chatbot-upload-input.dragging-over{border-color:#0042da}.secondary-button{background-color:#f7f8ff;border-radius:var(--chatbot-border-radius);color:var(--chatbot-host-bubble-color)}.chatbot-country-select{color:#303235}.chatbot-country-select,.chatbot-date-input{background-color:#fff;border-radius:var(--chatbot-border-radius)}.chatbot-date-input{color:#303235;color-scheme:light}.chatbot-popup-blocked-toast{border-radius:var(--chatbot-border-radius)}.messagelist{border-radius:.5rem;height:100%;overflow-y:scroll;width:100%}.messagelistloading{display:flex;justify-content:center;margin-top:1rem;width:100%}.usermessage{padding:1rem 1.5rem}.usermessagewaiting-light{background:linear-gradient(270deg,#ede7f6,#e3f2fd,#ede7f6);background-position:-100% 0;background-size:200% 200%}.usermessagewaiting-dark,.usermessagewaiting-light{animation:loading-gradient 2s ease-in-out infinite;animation-direction:alternate;animation-name:loading-gradient;padding:1rem 1.5rem}.usermessagewaiting-dark{background:linear-gradient(270deg,#2e2352,#1d3d60,#2e2352);background-position:-100% 0;background-size:200% 200%;color:#ececf1}@keyframes loading-gradient{0%{background-position:-100% 0}to{background-position:100% 0}}.apimessage{animation:fadein .5s;padding:1rem 1.5rem}@keyframes fadein{0%{opacity:0}to{opacity:1}}.apimessage,.usermessage,.usermessagewaiting{display:flex}.markdownanswer{line-height:1.75}.markdownanswer a:hover{opacity:.8}.markdownanswer a{color:#16bed7;font-weight:500}.markdownanswer code{color:#15cb19;font-weight:500;white-space:pre-wrap!important}.markdownanswer ol,.markdownanswer ul{margin:1rem}.boticon,.usericon{border-radius:1rem;margin-right:1rem}.markdownanswer h1,.markdownanswer h2,.markdownanswer h3{font-size:inherit}.center{flex-direction:column;padding:10px;position:relative}.center,.cloud{align-items:center;display:flex;justify-content:center}.cloud{border-radius:.5rem;height:calc(100% - 50px);width:400px}input{background-color:transparent;border:none;font-family:Poppins,sans-serif;padding:10px}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:brightness-75:active{--tw-brightness:brightness(.75);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-full{width:100%}.sm\\:max-w-lg{max-width:512px}.sm\\:p-0{padding:0}}';const xe=e=>null==e,Re=e=>null!=e,Ce=async e=>{try{var t="string"==typeof e?e:e.url,r=await fetch(t,{method:"string"==typeof e?"GET":e.method,mode:"cors",headers:"string"!=typeof e&&Re(e.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof e&&Re(e.body)?JSON.stringify(e.body):void 0});let n;var o=r.headers.get("Content-Type");if(n=o&&o.includes("application/json")?await r.json():"string"!=typeof e&&"blob"===e.type?await r.blob():await r.text(),r.ok)return{data:n};{let e;throw e="object"==typeof n&&"error"in n?n.error:n||r.statusText}}catch(e){return console.error(e),{error:e}}},Se=ne('<svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),Te=ne('<img alt="Bubble button icon">'),Ae=ne('<button part="button"><svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),_e=e=>{{const t=Ae(),r=t.firstChild;return t.$$click=()=>e.toggleBot(),t.style.setProperty("z-index","42424242"),de(t,q(X,{get when(){return xe(e.customIconSrc)},keyed:!0,get children(){const t=Se();return x((r=>{var o=e.iconColor??"white",n="stroke-2 fill-transparent absolute duration-200 transition "+(e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===e.size?" w-9":" w-7");return o!==r._v$&&(null!=(r._v$=o)?t.style.setProperty("stroke",o):t.style.removeProperty("stroke")),n!==r._v$2&&se(t,"class",r._v$2=n),r}),{_v$:void 0,_v$2:void 0}),t}}),r),de(t,q(X,{get when(){return e.customIconSrc},get children(){const t=Te();return x((r=>{var o=e.customIconSrc,n="rounded-full object-cover"+(e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===e.size?" w-9 h-9":" w-7 h-7");return o!==r._v$3&&se(t,"src",r._v$3=o),n!==r._v$4&&ae(t,r._v$4=n),r}),{_v$3:void 0,_v$4:void 0}),t}}),r),x((o=>{var n="fixed shadow-md rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in"+("large"===e.size?" w-16 h-16":" w-12 h-12"),i=e.backgroundColor??"#3B81F6",s=e.right?e.right.toString()+"px":"20px",a=e.bottom?e.bottom.toString()+"px":"20px",l=e.iconColor??"white",c="absolute duration-200 transition "+(e.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")+("large"===e.size?" w-9":" w-7");return n!==o._v$5&&ae(t,o._v$5=n),i!==o._v$6&&(null!=(o._v$6=i)?t.style.setProperty("background-color",i):t.style.removeProperty("background-color")),s!==o._v$7&&(null!=(o._v$7=s)?t.style.setProperty("right",s):t.style.removeProperty("right")),a!==o._v$8&&(null!=(o._v$8=a)?t.style.setProperty("bottom",a):t.style.removeProperty("bottom")),l!==o._v$9&&(null!=(o._v$9=l)?r.style.setProperty("fill",l):r.style.removeProperty("fill")),c!==o._v$10&&se(r,"class",o._v$10=c),o}),{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),t}};let Le;ie(["click"]);const Pe=new Uint8Array(16);function Ee(){if(Le=Le||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return Le(Pe);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));var Oe={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Me(e,t,r){if(Oe.randomUUID&&!t&&!e)return Oe.randomUUID();var o=(e=e||{}).random||(e.rng||Ee)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return function(e,t=0){return Be[e[t+0]]+Be[e[t+1]]+Be[e[t+2]]+Be[e[t+3]]+"-"+Be[e[t+4]]+Be[e[t+5]]+"-"+Be[e[t+6]]+Be[e[t+7]]+"-"+Be[e[t+8]]+Be[e[t+9]]+"-"+Be[e[t+10]]+Be[e[t+11]]+Be[e[t+12]]+Be[e[t+13]]+Be[e[t+14]]+Be[e[t+15]]}(o)}const $e=({apiHost:e="http://localhost:3000",body:t})=>Ce({method:"POST",url:e+"/api/v1/openai-assistants-file",body:t,type:"blob"}),De=ne('<input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100" type="text">'),Ue=e=>{const[t,r]=V(e,["ref","onInput"]);return(o=De()).$$input=e=>t.onInput(e.currentTarget.value),"function"==typeof(n=e.ref)?ce(n,o):e.ref=o,le(o,W({get disabled(){return e.disabled},get style(){return{"font-size":e.fontSize?e.fontSize+"px":"16px"}}},r),!1,!1),o;var o,n},[Ie,je]=(ie(["input"]),k()),Ne=ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">'),ze=e=>{return le(t=Ne(),W({get style(){return{fill:e.color??"#3B81F6"}}},e),!0,!0),t;var t},qe=ne('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-refresh" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"></path><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4">'),Fe=e=>{{const t=qe();return x((()=>se(t,"stroke",e.color??"#3B81F6"))),t}},Ge=ne('<button type="submit">'),He=ne('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),We=e=>{return le(t=Ge(),W({get disabled(){return e.isDisabled||e.isLoading}},e,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+e.class},style:{background:"transparent",border:"none"}}),!1,!0),de(t,q(X,{get when(){return!e.isLoading},get fallback(){return q(Ye,{class:"text-white"})},get children(){return q(ze,{get color(){return e.sendButtonColor},get class(){return"send-icon flex "+(e.disableIcon?"hidden":"")}})}})),t;var t},Ve=e=>{return le(t=Ge(),W({get disabled(){return e.isDisabled||e.isLoading}},e,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+e.class},style:{background:"transparent",border:"none"},title:"New Chat"}),!1,!0),de(t,q(X,{get when(){return!e.isLoading},get fallback(){return q(Ye,{class:"text-white"})},get children(){return q(Fe,{get color(){return e.sendButtonColor},get class(){return"send-icon flex "+(e.disableIcon?"hidden":"")}})}})),t;var t},Ye=e=>{return le(t=He(),W(e,{get class(){return"animate-spin -ml-1 mr-3 h-5 w-5 "+e.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),t;var t},Je=ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="19px"><path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z">'),Xe=e=>{return le(t=Je(),W({get style(){return{fill:e.color??"#3B81F6"}}},e),!0,!0),t;var t},Ke=ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="19px"><path d="M19,12C19,15.86 15.86,19 12,19C8.14,19 5,15.86 5,12C5,8.14 8.14,5 12,5C15.86,5 19,8.14 19,12Z">'),Qe=e=>{return le(t=Ke(),W({get style(){return{fill:e.color??"rgb(248 113 113)"}}},e,{class:"animate-ping"}),!0,!0),t;var t},Ze=ne('<button type="button">');function et(e){return le(t=Ze(),W({get disabled(){return e.isDisabled||e.isLoading}},e,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+e.class},style:{background:"transparent",border:"none"},onClick:()=>e.onRecordToggle?.()}),!1,!0),de(t,q(X,{get when(){return!e.isLoading},get fallback(){return q(Ye,{class:"text-white"})},get children(){return C((()=>!e.isRecording))()?q(Xe,{get color(){return e.buttonColor},get class(){return"send-icon flex "+(e.disableIcon?"hidden":"")}}):q(Qe,{get class(){return"send-icon flex "+(e.disableIcon?"hidden":"")}})}})),t;var t}var tt,rt,ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nt={exports:{}},it=(function(e){function t(e,n){if(!e)throw"First parameter is required.";n=new r(e,n=n||{type:"video"});var i=this;function s(t){t&&(n.initCallback=function(){t(),t=n.initCallback=null});var r=new o(e,n);(p=new r(e,n)).record(),u("recording"),n.disableLogs||console.log("Initialized recorderType:",p.constructor.name,"for output-type:",n.type)}function a(e){function t(t){if(p){Object.keys(p).forEach((function(e){"function"!=typeof p[e]&&(i[e]=p[e])}));var r,o=p.blob;if(!o){if(!t)throw"Recording failed.";p.blob=o=t}if(o&&!n.disableLogs&&console.log(o.type,"->",m(o.size)),e){try{r=c.createObjectURL(o)}catch(t){}"function"==typeof e.call?e.call(i,r):e(r)}n.autoWriteToDisk&&d((function(e){var t={};t[n.type+"Blob"]=e,P.Store(t)}))}else"function"==typeof e.call?e.call(i,""):e("")}e=e||function(){},p?"paused"===i.state?(i.resumeRecording(),setTimeout((function(){a(e)}),1)):("recording"===i.state||n.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',i.state),n.disableLogs||console.log("Stopped recording "+n.type+" stream."),"gif"!==n.type?p.stop(t):(p.stop(),t()),u("stopped")):g()}function l(e){postMessage((new FileReaderSync).readAsDataURL(e))}function d(e,t){if(!e)throw"Pass a callback function over getDataURL.";var r,o=(t||p||{}).blob;o?"undefined"==typeof Worker||navigator.mozGetUserMedia?((r=new FileReader).readAsDataURL(o),r.onload=function(t){e(t.target.result)}):((r=function(e){try{var t=c.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(t);return c.revokeObjectURL(t),r}catch(e){}}(l)).onmessage=function(t){e(t.data)},r.postMessage(o)):(n.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout((function(){d(e,t)}),1e3))}function h(e){e=e||0,"paused"===i.state?setTimeout((function(){h(e)}),1e3):"stopped"!==i.state&&(e>=i.recordingDuration?a(i.onRecordingStopped):(e+=1e3,setTimeout((function(){h(e)}),1e3)))}function u(e){i&&(i.state=e,"function"==typeof i.onStateChanged.call?i.onStateChanged.call(i,e):i.onStateChanged(e))}var p,f='It seems that recorder is destroyed or "startRecording" is not invoked for '+n.type+" recorder.";function g(){!0!==n.disableLogs&&console.warn(f)}var w,v={startRecording:function(t){return n.disableLogs||console.log("RecordRTC version: ",i.version),(n=t?new r(e,t):n).disableLogs||console.log("started recording "+n.type+" stream."),p?(p.clearRecordedData(),p.record(),u("recording"),i.recordingDuration&&h()):s((function(){i.recordingDuration&&h()})),i},stopRecording:a,pauseRecording:function(){p?"recording"!==i.state?n.disableLogs||console.warn("Unable to pause the recording. Recording state: ",i.state):(u("paused"),p.pause(),n.disableLogs||console.log("Paused recording.")):g()},resumeRecording:function(){p?"paused"!==i.state?n.disableLogs||console.warn("Unable to resume the recording. Recording state: ",i.state):(u("recording"),p.resume(),n.disableLogs||console.log("Resumed recording.")):g()},initRecorder:s,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return i.recordingDuration=e,i.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){i.onRecordingStopped=e}}},clearRecordedData:function(){p?(p.clearRecordedData(),n.disableLogs||console.log("Cleared old recorded data.")):g()},getBlob:function(){if(p)return p.blob;g()},getDataURL:d,toURL:function(){if(p)return c.createObjectURL(p.blob);g()},getInternalRecorder:function(){return p},save:function(e){p?b(p.blob,e):g()},getFromDisk:function(e){p?t.getFromDisk(n.type,e):g()},setAdvertisementArray:function(e){n.advertisement=[];for(var t=e.length,r=0;r<t;r++)n.advertisement.push({duration:r,image:e[r]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==i.state||n.disableLogs||console.warn("Stop an active recorder."),p&&"function"==typeof p.clearRecordedData&&p.clearRecordedData(),p=null,u("inactive"),i.blob=null},onStateChanged:function(e){n.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return i.state},destroy:function(){var e=n.disableLogs;n={disableLogs:!0},i.reset(),u("destroyed"),v=i=null,k.AudioContextConstructor&&(k.AudioContextConstructor.close(),k.AudioContextConstructor=null),n.disableLogs=e,n.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return i=v;for(w in v)this[w]=v[w];return i=this,v}function r(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===T||t.recorderType===S||void 0!==M&&t.recorderType===M?t.type="video":t.recorderType===E?t.type="gif":t.recorderType===C?t.type="audio":t.recorderType===R&&(v(e,"audio").length&&v(e,"video").length||!v(e,"audio").length&&v(e,"video").length?t.type="video":v(e,"audio").length&&!v(e,"video").length&&(t.type="audio"))),void 0!==R&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type)||(t.type="audio"),t}function o(e,t){var r;return(p||d||h)&&(r=C),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!p&&(r=R),"video"===t.type&&(p||h)&&(r=T,void 0!==M)&&"undefined"!=typeof ReadableStream&&(r=M),"gif"===t.type&&(r=E),"canvas"===t.type&&(r=S),x()&&r!==S&&r!==E&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(v(e,"video").length||v(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(r=R):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(r=R)),e instanceof Array&&e.length&&(r=O),t.recorderType&&(r=t.recorderType),!t.disableLogs&&r&&r.name&&console.log("Using recorderType:",r.name||r.constructor.name),!r&&f?R:r}function n(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r,o,n,i,s=this.mediaType,a=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof s.audio&&x()&&!v(e,"audio").length&&(s.audio=!1),"function"!=typeof s.video&&x()&&!v(e,"video").length&&(s.video=!1),"function"!=typeof s.gif&&x()&&!v(e,"video").length&&(s.gif=!1),!s.audio&&!s.video&&!s.gif)throw"MediaStream must have either audio or video tracks.";s.audio&&(r=null,"function"==typeof s.audio&&(r=s.audio),this.audioRecorder=new t(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:r,mimeType:a.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),s.video||this.audioRecorder.startRecording()),s.video&&(r=null,"function"==typeof s.video&&(r=s.video),o=e,x()&&s.audio&&"function"==typeof s.audio&&(i=v(e,"video")[0],u?((o=new g).addTrack(i),r&&r===T&&(r=R)):(o=new g).addTrack(i)),this.videoRecorder=new t(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:r,mimeType:a.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),s.audio||this.videoRecorder.startRecording()),s.audio&&s.video&&(n=this,i=!0===x(),!0===(i=!(s.audio instanceof C&&s.video||!0!==s.audio&&!0!==s.video&&s.audio!==s.video)&&i)?(n.audioRecorder=null,n.videoRecorder.startRecording()):n.videoRecorder.initRecorder((function(){n.audioRecorder.initRecorder((function(){n.videoRecorder.startRecording(),n.audioRecorder.startRecording()}))}))),s.gif&&(r=null,"function"==typeof s.gif&&(r=s.gif),this.gifRecorder=new t(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:r,mimeType:a.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){var r;"undefined"!=typeof Worker?((r=function(e){e=c.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"}));var t,r=new Worker(e);if(void 0!==c)t=c;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(e),r}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}))).onmessage=function(e){t(e.data)},r.postMessage(e)):((r=new FileReader).readAsDataURL(e),r.onload=function(e){t(e.target.result)})}this.getBlob((function(r){r.audio&&r.video?t(r.audio,(function(o){t(r.video,(function(t){e({audio:o,video:t})}))})):r.audio?t(r.audio,(function(t){e({audio:t})})):r.video&&t(r.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}t.version="5.6.2",(e.exports=t).getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),P.Fetch((function(r,o){"all"!==e&&o===e+"Blob"&&t&&t(r),"all"===e&&t&&t(r,o.replace("Blob",""))}))},t.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(r){e.gif.getDataURL((function(e){P.Store({audioBlob:t,videoBlob:r,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){P.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){P.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){P.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){P.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){P.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){P.Store({gifBlob:e})}))},n.getFromDisk=t.getFromDisk,n.writeToDisk=t.writeToDisk,void 0!==t&&(t.MRecordRTC=n),(l=void 0!==ot?ot:null)&&"undefined"==typeof window&&void 0!==ot&&(ot.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},ot.console||(ot.console={}),void 0!==ot.console.log&&void 0!==ot.console.error||(ot.console.error=ot.console.log=ot.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(l.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},l.HTMLVideoElement=function(){}),"undefined"==typeof location&&(l.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(l.screen={width:0,height:0}),void 0===c&&(l.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),l.window=ot);var i,s=window.requestAnimationFrame,a=(void 0===s&&("undefined"!=typeof webkitRequestAnimationFrame?s=webkitRequestAnimationFrame:"undefined"!=typeof mozRequestAnimationFrame?s=mozRequestAnimationFrame:"undefined"!=typeof msRequestAnimationFrame?s=msRequestAnimationFrame:void 0===s&&(i=0,s=function(e,t){var r=(new Date).getTime(),o=Math.max(0,16-(r-i)),n=setTimeout((function(){e(r+o)}),o);return i=r+o,n})),window.cancelAnimationFrame),l=(void 0===a&&("undefined"!=typeof webkitCancelAnimationFrame?a=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?a=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?a=msCancelAnimationFrame:void 0===a&&(a=function(e){clearTimeout(e)})),window.AudioContext),c=(void 0===l&&("undefined"!=typeof webkitAudioContext&&(l=webkitAudioContext),"undefined"!=typeof mozAudioContext)&&(l=mozAudioContext),window.URL),d=(void 0===c&&"undefined"!=typeof webkitURL&&(c=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia)&&(navigator.getUserMedia=navigator.mozGetUserMedia),!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob)),h=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),u=-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&"netscape"in window&&/ rv:/.test(navigator.userAgent),p=!h&&!d&&!!navigator.webkitGetUserMedia||w()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),f=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),g=(f&&!p&&-1!==navigator.userAgent.indexOf("CriOS")&&(p=!(f=!1)),window.MediaStream);function m(e){var t;return 0===e?"0 Bytes":(t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10),(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t])}function b(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var r=(e.type||"video/webm").split("/")[1],o=(-1!==r.indexOf(";")&&(r=r.split(";")[0]),t&&-1!==t.indexOf(".")&&(t=(o=t.split("."))[0],r=o[1]),(t||Math.round(9999999999*Math.random())+888888888)+"."+r);return void 0!==navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(e,o):void 0!==navigator.msSaveBlob?navigator.msSaveBlob(e,o):((t=document.createElement("a")).href=c.createObjectURL(e),t.download=o,t.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(t),"function"==typeof t.click?t.click():(t.target="_blank",t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),void c.revokeObjectURL(t.href))}function w(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron")}function v(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function y(e,t){!("srcObject"in t)&&"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0!==(g=void 0===g&&"undefined"!=typeof webkitMediaStream?webkitMediaStream:g)&&void 0===g.prototype.stop&&(g.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),void 0!==t&&(t.invokeSaveAsDialog=b,t.getTracks=v,t.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var r=new EBML.Reader,o=new EBML.Decoder,n=EBML.tools,i=new FileReader;i.onload=function(e){o.decode(this.result).forEach((function(e){r.read(e)})),r.stop();var i=n.makeMetadataSeekable(r.metadatas,r.duration,r.cues),s=this.result.slice(r.metadataSize);i=new Blob([i,s],{type:"video/webm"});t(i)},i.readAsArrayBuffer(e)},t.bytesToSize=m,t.isElectron=w);var k={};function x(){var e,t,r,o;return!!(u||f||d)||(o=navigator.userAgent,e=""+parseFloat(navigator.appVersion),t=parseInt(navigator.appVersion,10),(p||h)&&(r=o.indexOf("Chrome"),e=o.substring(r+7)),-1!==(o=(e=-1!==(o=e.indexOf(";"))?e.substring(0,o):e).indexOf(" "))&&(e=e.substring(0,o)),t=parseInt(""+e,10),isNaN(t)&&(e=""+parseFloat(navigator.appVersion),t=parseInt(navigator.appVersion,10)),49<=t)}function R(e,t){var r,o=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(t=t||{mimeType:"video/webm"}).type&&(v(e,"video").length&&v(e,"audio").length&&(navigator.mozGetUserMedia?(r=new g).addTrack(v(e,"audio")[0]):r=new g(v(e,"audio")),e=r),t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=p?"audio/webm":"audio/ogg"),t.mimeType)&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg");var n,i=[];function s(){o.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(o.timestamps[o.timestamps.length-1],o.timestamps)}function a(e){return n&&n.mimeType?n.mimeType:e.mimeType||"video/webm"}function l(){i=[],n=null,o.timestamps=[]}this.getArrayOfBlobs=function(){return i},this.record=function(){o.blob=null,o.clearRecordedData(),o.timestamps=[],c=[],i=[];var r=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",r),n=n&&null,p&&!x()&&(r="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&r.mimeType&&!MediaRecorder.isTypeSupported(r.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",r.mimeType),r.mimeType="audio"===t.type?"audio/webm":"video/webm");try{n=new MediaRecorder(e,r),t.mimeType=r.mimeType}catch(t){n=new MediaRecorder(e)}r.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in n&&!1===n.canRecordMimeType(r.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",r.mimeType)),n.ondataavailable=function(e){var n;e.data&&c.push("ondataavailable: "+m(e.data.size)),"number"==typeof t.timeSlice?e.data&&e.data.size&&(i.push(e.data),s(),"function"==typeof t.ondataavailable)&&(n=t.getNativeBlob?e.data:new Blob([e.data],{type:a(r)}),t.ondataavailable(n)):!e.data||!e.data.size||e.data.size<100||o.blob?o.recordingCallback&&(o.recordingCallback(new Blob([],{type:a(r)})),o.recordingCallback=null):(o.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:a(r)}),o.recordingCallback&&(o.recordingCallback(o.blob),o.recordingCallback=null))},n.onstart=function(){c.push("started")},n.onpause=function(){c.push("paused")},n.onresume=function(){c.push("resumed")},n.onstop=function(){c.push("stopped")},n.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",r.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),!o.manuallyStopped&&n&&"inactive"===n.state?(delete t.timeslice,n.start(6e5)):setTimeout(void 0,1e3),"inactive"!==n.state)&&"stopped"!==n.state&&n.stop()},"number"==typeof t.timeSlice?(s(),n.start(t.timeSlice)):n.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},o.manuallyStopped=!0,n&&(this.recordingCallback=e,"recording"===n.state&&n.stop(),"number"==typeof t.timeSlice)&&setTimeout((function(){o.blob=new Blob(i,{type:a(t)}),o.recordingCallback(o.blob)}),100)},this.pause=function(){n&&"recording"===n.state&&n.pause()},this.resume=function(){n&&"paused"===n.state&&n.resume()},this.clearRecordedData=function(){n&&"recording"===n.state&&o.stop(l),l()},this.getInternalRecorder=function(){return n},this.blob=null,this.getState=function(){return n&&n.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1),o=this;!function r(){n&&!1!==t.checkForInactiveTracks&&(!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),o.stop()):setTimeout(r,1e3))}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function C(e,r){if(!v(e,"audio").length)throw"Your stream has no audio tracks.";var o,n=this,i=[],s=[],a=!1,l=0,d=2,h=(r=r||{}).desiredSampRate;function u(){if(!1!==r.checkForInactiveTracks)if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function p(e,t){function r(e,t){var r,o=e.numberOfAudioChannels,n=e.leftBuffers.slice(0),i=e.rightBuffers.slice(0),s=e.sampleRate,a=e.internalInterleavedLength;e=e.desiredSampRate;function l(e,t,r){var o=Math.round(e.length*(t/r)),n=[],i=Number((e.length-1)/(o-1));n[0]=e[0];for(var s,a=1;a<o-1;a++){var l=a*i,c=Number(Math.floor(l)).toFixed(),d=Number(Math.ceil(l)).toFixed();n[a]=(s=e[c])+((d=e[d])-s)*(l-c)}return n[o-1]=e[e.length-1],n}function c(e,t){for(var r=new Float64Array(t),o=0,n=e.length,i=0;i<n;i++){var s=e[i];r.set(s,o),o+=s.length}return r}function d(e,t,r){for(var o=r.length,n=0;n<o;n++)e.setUint8(t+n,r.charCodeAt(n))}2===o&&(n=c(n,a),i=c(i,a),e)&&(n=l(n,e,s),i=l(i,e,s)),1===o&&(n=c(n,a),e)&&(n=l(n,e,s)),e&&(s=e),2===o&&(r=function(e,t){for(var r=e.length+t.length,o=new Float64Array(r),n=0,i=0;i<r;)o[i++]=e[n],o[i++]=t[n],n++;return o}(n,i));a=(r=1===o?n:r).length,e=new ArrayBuffer(44+2*a);for(var h=new DataView(e),u=(d(h,0,"RIFF"),h.setUint32(4,36+2*a,!0),d(h,8,"WAVE"),d(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,o,!0),h.setUint32(24,s,!0),h.setUint32(28,s*o*2,!0),h.setUint16(32,2*o,!0),h.setUint16(34,16,!0),d(h,36,"data"),h.setUint32(40,2*a,!0),a),p=44,f=0;f<u;f++)h.setInt16(p,32767*r[f],!0),p+=2;if(t)return t({buffer:e,view:h});postMessage({buffer:e,view:h})}var o,n,i;e.noWorker?r(e,(function(e){t(e.buffer,e.view)})):(n=r,n=c.createObjectURL(new Blob([n.toString(),";this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),(i=new Worker(n)).workerURL=n,(o=i).onmessage=function(e){t(e.data.buffer,e.data.view),c.revokeObjectURL(o.workerURL),o.terminate()},o.postMessage(e))}!0===r.leftChannel&&(d=1),(!(d=1===r.numberOfAudioChannels?1:d)||d<1)&&(d=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+d),void 0===r.checkForInactiveTracks&&(r.checkForInactiveTracks=!0),this.record=function(){if(!1===u())throw"Please make sure MediaStream is active.";k(),R=y=!1,a=!0,void 0!==r.timeSlice&&S()},this.stop=function(e){e=e||function(){},a=!1,p({desiredSampRate:h,sampleRate:w,numberOfAudioChannels:d,internalInterleavedLength:l,leftBuffers:i,rightBuffers:1===d?[]:s,noWorker:r.noWorker},(function(t,r){n.blob=new Blob([r],{type:"audio/wav"}),n.buffer=new ArrayBuffer(r.buffer.byteLength),n.view=r,n.sampleRate=h||w,n.bufferSize=b,n.length=l,R=!1,e&&e(n.blob)}))},(t.Storage=void 0===t.Storage?{AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}:t.Storage).AudioContextConstructor&&"closed"!==t.Storage.AudioContextConstructor.state||(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var f=t.Storage.AudioContextConstructor,g=f.createMediaStreamSource(e),m=[0,256,512,1024,2048,4096,8192,16384],b=void 0===r.bufferSize?4096:r.bufferSize;if(-1!==m.indexOf(b)||r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(m,null,"\t")),f.createJavaScriptNode)o=f.createJavaScriptNode(b,d,d);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";o=f.createScriptProcessor(b,d,d)}g.connect(o),r.bufferSize||(b=o.bufferSize);var w=void 0!==r.sampleRate?r.sampleRate:f.sampleRate||44100,y=(!(w<22050||96e3<w)||r.disableLogs||console.log("sample-rate must be under range 22050 and 96000."),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate),!1);function k(){i=[],l=0,y=a=R=!(s=[]),f=null,n.leftchannel=i,n.rightchannel=s,n.numberOfAudioChannels=d,n.desiredSampRate=h,n.sampleRate=w,n.recordingLength=l,C={left:[],right:[],recordingLength:0}}function x(){o&&(o.onaudioprocess=null,o.disconnect(),o=null),g&&(g.disconnect(),g=null),k()}this.pause=function(){y=!0},this.resume=function(){if(!1===u())throw"Please make sure MediaStream is active.";a?y=!1:(r.disableLogs||console.log("Seems recording has been restarted."),this.record())},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,a&&this.stop(x),x()},this.name="StereoAudioRecorder";var R=!(this.toString=function(){return this.name});o.onaudioprocess=function(e){var t,c;y||(!1===u()&&(r.disableLogs||console.log("MediaStream seems stopped."),o.disconnect(),a=!1),a?(R||(R=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback()),t=e.inputBuffer.getChannelData(0),t=new Float32Array(t),i.push(t),2===d&&(e=e.inputBuffer.getChannelData(1),c=new Float32Array(e),s.push(c)),l+=b,n.recordingLength=l,void 0!==r.timeSlice&&(C.recordingLength+=b,C.left.push(t),2===d)&&C.right.push(c)):g&&(g.disconnect(),g=null))},f.createMediaStreamDestination?o.connect(f.createMediaStreamDestination()):o.connect(f.destination),this.leftchannel=i,this.rightchannel=s,this.numberOfAudioChannels=d,this.desiredSampRate=h,this.sampleRate=w,n.recordingLength=l;var C={left:[],right:[],recordingLength:0};function S(){a&&"function"==typeof r.ondataavailable&&void 0!==r.timeSlice&&(C.left.length?(p({desiredSampRate:h,sampleRate:w,numberOfAudioChannels:d,internalInterleavedLength:C.recordingLength,leftBuffers:C.left,rightBuffers:1===d?[]:C.right},(function(e,t){t=new Blob([t],{type:"audio/wav"}),r.ondataavailable(t),setTimeout(S,r.timeSlice)})),C={left:[],right:[],recordingLength:0}):setTimeout(S,r.timeSlice))}}function S(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var r,o,n,i=!1,s=(["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(i=!0)})),!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome)),a=50,l=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(s&&l&&l[2]&&(a=parseInt(l[2],10)),s&&a<52&&(i=!1),i=!t.useWhammyRecorder&&i)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)r=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";r=e.canvas}else!navigator.mozGetUserMedia||t.disableLogs||console.error("Canvas recording is NOT supported in Firefox.");this.record=function(){if(n=!0,i&&!t.useWhammyRecorder){var e;"captureStream"in r?e=r.captureStream(25):"mozCaptureStream"in r?e=r.mozCaptureStream(25):"webkitCaptureStream"in r&&(e=r.webkitCaptureStream(25));try{var s=new g;s.addTrack(v(e,"video")[0]),e=s}catch(e){}if(!e)throw"captureStream API are NOT available.";(o=new R(e,{mimeType:t.mimeType||"video/webm"})).record()}else p.frames=[],u=(new Date).getTime(),h();t.initCallback&&t.initCallback()},this.getWebPImages=function(r){var o;"canvas"!==e.nodeName.toLowerCase()||(o=p.frames.length,p.frames.forEach((function(e,r){var n=o-r;t.disableLogs||console.log(n+"/"+o+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(n,o),n=e.image.toDataURL("image/webp",1);p.frames[r].image=n})),t.disableLogs)||console.log("Generating WebM"),r()};var c=!(this.stop=function(e){n=!1;var r=this;i&&o?o.stop(e):this.getWebPImages((function(){p.compile((function(o){t.disableLogs||console.log("Recording finished!"),r.blob=o,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob),p.frames=[]}))}))});function d(){p.frames=[],c=n=!1}function h(){if(c)return u=(new Date).getTime(),setTimeout(h,500);var r,o,i;"canvas"===e.nodeName.toLowerCase()?(r=(new Date).getTime()-u,u=(new Date).getTime(),p.frames.push({image:(o=document.createElement("canvas"),i=o.getContext("2d"),o.width=e.width,o.height=e.height,i.drawImage(e,0,0),o),duration:r}),n&&setTimeout(h,t.frameInterval)):html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var r=(new Date).getTime()-u;if(!r)return setTimeout(h,t.frameInterval);u=(new Date).getTime(),p.frames.push({image:e.toDataURL("image/webp",1),duration:r}),n&&setTimeout(h,t.frameInterval)}})}this.pause=function(){c=!0,o instanceof R&&o.pause()},this.resume=function(){c=!1,o instanceof R?o.resume():n||this.record()},this.clearRecordedData=function(){n&&this.stop(d),d()},this.name="CanvasRecorder",this.toString=function(){return this.name};var u=(new Date).getTime(),p=new A.Video(100)}function T(e,t){function r(e){e=void 0!==e?e:10;var t=(new Date).getTime()-a;return t?n?(a=(new Date).getTime(),setTimeout(r,100)):(a=(new Date).getTime(),s.paused&&s.play(),d.drawImage(s,0,0,c.width,c.height),l.frames.push({duration:t,image:c.toDataURL("image/webp")}),void(o||setTimeout(r,e,e))):setTimeout(r,e,e)}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval);var o=!(this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),c.width=t.canvas.width||320,c.height=t.canvas.height||240,d=c.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),y(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),a=(new Date).getTime(),l=new A.Video,t.disableLogs||(console.log("canvas resolutions",c.width,"*",c.height),console.log("video width/height",s.width||c.width,"*",s.height||c.height)),r(t.frameInterval)}),n=!(this.stop=function(e){e=e||function(){},o=!0;var r=this;setTimeout((function(){!function(e,t,r,o,n){var i,s,a,l=document.createElement("canvas"),d=(l.width=c.width,l.height=c.height,l.getContext("2d")),h=[],u=-1===t,p=t&&0<t&&t<=e.length?t:e.length,f=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),g=r&&0<=r&&r<=1?r:0,m=o&&0<=o&&o<=1?o:0,b=!1;s=-1,a=(i={length:p,functionToLoop:function(t,r){function o(){!b&&s-n<=s*m||(u&&(b=!0),h.push(e[r])),t()}var n,i,s,a;b?o():((a=new Image).onload=function(){d.drawImage(a,0,0,c.width,c.height);var e=d.getImageData(0,0,c.width,c.height);n=0,i=e.data.length,s=e.data.length/4;for(var t=0;t<i;t+=4){var r=e.data[t],l=e.data[t+1],h=e.data[t+2];Math.sqrt(Math.pow(r-0,2)+Math.pow(l-0,2)+Math.pow(h-0,2))<=f*g&&n++}o()},a.src=e[r].image)},callback:function(){(h=h.concat(e.slice(p))).length<=0&&h.push(e[e.length-1]),n(h)}}).length,function e(){++s===a?i.callback():setTimeout((function(){i.functionToLoop(e,s)}),1)}()}(l.frames,-1,null,null,(function(o){l.frames=o,t.advertisement&&t.advertisement.length&&(l.frames=t.advertisement.concat(l.frames)),l.compile((function(t){r.blob=t,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob)}))}))}),10)});function i(){l.frames=[],n=!(o=!0)}this.pause=function(){n=!0},this.resume=function(){n=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(i),i()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,a,l,c=document.createElement("canvas"),d=c.getContext("2d")}void 0!==l?k.AudioContext=l:"undefined"!=typeof webkitAudioContext&&(k.AudioContext=webkitAudioContext),void 0!==t&&(t.Storage=k),void 0!==t&&(t.MediaStreamRecorder=R),void 0!==t&&(t.StereoAudioRecorder=C),void 0!==t&&(t.CanvasRecorder=S),void 0!==t&&(t.WhammyRecorder=T),_.prototype.add=function(e,t){if("toDataURL"in(e="canvas"in e?e.canvas:e)&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},_.prototype.compile=function(e){r=L,r=c.createObjectURL(new Blob([r.toString(),"this.onmessage =  function (eee) {"+r.name+"(eee.data);}"],{type:"application/javascript"})),t=new Worker(r),c.revokeObjectURL(r);var t,r=t;r.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},r.postMessage(this.frames)};var A={Video:_};function _(e){this.frames=[],this.duration=e||1,this.quality=.8}function L(e){function t(e){for(var t=[];0<e;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function r(e){return new Uint8Array(e.split("").map((function(e){return e.charCodeAt(0)})))}function o(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var r=0;r<e.length;r+=8)t.push(parseInt(e.substr(r,8),2));return new Uint8Array(t)}function n(e){for(var t=0,r={};t<e.length;){var o=e.substr(t,4),i=(i=t,parseInt(e.substr(i+4,4).split("").map((function(e){return e=e.charCodeAt(0).toString(2),new Array(8-e.length+1).join("0")+e})).join(""),2)),s=e.substr(t+4+4,i);t+=8+i,r[o]=r[o]||[],"RIFF"===o||"LIST"===o?r[o].push(n(s)):r[o].push(s)}return r}e=new function(e){var n=function(e){if(e[0]){for(var t=e[0].width,r=e[0].height,o=e[0].duration,n=1;n<e.length;n++)o+=e[n].duration;return{duration:o,width:t,height:r}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(e);if(!n)return[];for(var i,s=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(i=n.duration,[].slice.call(new Uint8Array(new Float64Array([i]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:n.width,id:176},{data:n.height,id:186}]}]}]}]}],a=0,l=0;a<e.length;){for(var c=[],d=0;c.push(e[a]),d+=e[a].duration,++a<e.length&&d<3e4;);var h={id:524531317,data:function(e,t,r){return[{data:e,id:231}].concat(r.map((function(e){var r=function(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),127<e.trackNum)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:r,id:163}})))}(l,0,c)};s[1].data.push(h),l+=d}return function e(n){for(var i=[],s=0;s<n.length;s++){var a=n[s].data,l=(a="string"==typeof(a="number"==typeof(a="object"==typeof a?e(a):a)?o(a.toString(2)):a)?r(a):a).size||a.byteLength||a.length,c=Math.ceil(Math.ceil(Math.log(l)/Math.log(2))/8);l=l.toString(2),l=new Array(7*c+7+1-l.length).join("0")+l,c=new Array(c).join("0")+"1"+l;i.push(t(n[s].id)),i.push(o(c)),i.push(a)}return new Blob(i,{type:"video/webm"})}(s)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],r=t.indexOf("*"),o=0,n=[];o<4;o++)n[o]=t.charCodeAt(r+3+o);return{width:16383&(n[1]<<8|n[0]),height:16383&(n[3]<<8|n[2]),data:t,riff:e}}(n(atob(e.image.slice(23))));return t.duration=e.duration,t}))),postMessage(e)}void 0!==t&&(t.Whammy=A);var P={init:function(){var e,t,r,o=this;function n(e){e.createObjectStore(o.dataStoreName)}function i(){var e=t.transaction([o.dataStoreName],"readwrite");function r(t){e.objectStore(o.dataStoreName).get(t).onsuccess=function(e){o.callback&&o.callback(e.target.result,t)}}o.videoBlob&&e.objectStore(o.dataStoreName).put(o.videoBlob,"videoBlob"),o.gifBlob&&e.objectStore(o.dataStoreName).put(o.gifBlob,"gifBlob"),o.audioBlob&&e.objectStore(o.dataStoreName).put(o.audioBlob,"audioBlob"),r("audioBlob"),r("videoBlob"),r("gifBlob")}"undefined"==typeof indexedDB||void 0===indexedDB.open?console.error("IndexedDB API are not available in this browser."):(e=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),(r=indexedDB.open(e,1)).onerror=o.onError,r.onsuccess=function(){(t=r.result).onerror=o.onError,t.setVersion&&1!==t.version?t.setVersion(1).onsuccess=function(){n(t),i()}:i()},r.onupgradeneeded=function(e){n(e.target.result)})},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function E(e,t){"undefined"==typeof GIFEncoder&&((r=document.createElement("script")).src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(r)),t=t||{};var r,o=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement,n=(this.record=function(){"undefined"!=typeof GIFEncoder&&u?(o||(t.width||(t.width=i.offsetWidth||320),t.height||(t.height=i.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),d.width=t.canvas.width||320,d.height=t.canvas.height||240,i.width=t.video.width||320,i.height=t.video.height||240),(c=new GIFEncoder).setRepeat(0),c.setDelay(t.frameRate||200),c.setQuality(t.quality||10),c.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),p=s((function e(r){if(!0!==f.clearedRecordedData){if(n)return setTimeout((function(){e(r)}),100);p=s(e),r-l<90||(!o&&i.paused&&i.play(),o||h.drawImage(i,0,0,d.width,d.height),t.onGifPreview&&t.onGifPreview(d.toDataURL("image/png")),c.addFrame(h),l=r)}})),t.initCallback&&t.initCallback()):setTimeout(f.record,1e3)},!(this.stop=function(e){e=e||function(){},p&&a(p),this.blob=new Blob([new Uint8Array(c.stream().bin)],{type:"image/gif"}),e(this.blob),c.stream().bin=[]}));this.pause=function(){n=!0},this.resume=function(){n=!1},this.clearRecordedData=function(){f.clearedRecordedData=!0,c&&(c.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var i,l,c,d=document.createElement("canvas"),h=d.getContext("2d"),u=(o&&(e instanceof CanvasRenderingContext2D?d=(h=e).canvas:e instanceof HTMLCanvasElement&&(h=e.getContext("2d"),d=e)),!0),p=(o||((i=document.createElement("video")).muted=!0,i.autoplay=!0,i.playsInline=!0,u=!1,i.onloadedmetadata=function(){u=!0},y(e,i),i.play()),null),f=this}function B(e,t){t=t||"multi-streams-mixer";var r=[],o=!1,n=document.createElement("canvas"),i=n.getContext("2d"),s=(n.style.opacity=0,n.style.position="absolute",n.style.zIndex=-1,n.style.top="-1000em",n.style.left="-1000em",n.className=t,(document.body||document.documentElement).appendChild(n),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0,this),a=window.AudioContext,l=(void 0===a&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext)&&(a=mozAudioContext),window.URL),c=(void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia)&&(navigator.getUserMedia=navigator.mozGetUserMedia),window.MediaStream),d=(void 0!==(c=void 0===c&&"undefined"!=typeof webkitMediaStream?webkitMediaStream:c)&&void 0===c.prototype.stop&&(c.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),{});function h(){var e,t,i;o||(e=r.length,t=!1,i=[],r.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:i.push(e)})),t?(n.width=t.stream.width,n.height=t.stream.height):i.length?(n.width=1<e?2*i[0].width:i[0].width,n.height=i[0].height*(9!==e&&10!==e?7!==e&&8!==e?5!==e&&6!==e?3!==e&&4!==e?1:2:3:4:5)):(n.width=s.width||360,n.height=s.height||240),t&&t instanceof HTMLVideoElement&&u(t),i.forEach((function(e,t){u(e,t)})),setTimeout(h,s.frameInterval))}function u(e,t){var r,n,s,a;o||(n=r=0,s=e.width,a=e.height,1===t&&(r=e.width),2===t&&(n=e.height),3===t&&(r=e.width,n=e.height),4===t&&(n=2*e.height),5===t&&(r=e.width,n=2*e.height),6===t&&(n=3*e.height),7===t&&(r=e.width,n=3*e.height),void 0!==e.stream.left&&(r=e.stream.left),void 0!==e.stream.top&&(n=e.stream.top),void 0!==e.stream.width&&(s=e.stream.width),void 0!==e.stream.height&&(a=e.stream.height),i.drawImage(e,r,n,s,a),"function"==typeof e.stream.onRender&&e.stream.onRender(i,r,n,s,a,t))}function p(e){var r,o,n=document.createElement("video");return r=e,!("srcObject"in(o=n))&&"mozSrcObject"in o?o.mozSrcObject=r:o.srcObject=r,n.className=t,n.muted=!0,n.volume=0,n.width=e.width||s.width||360,n.height=e.height||s.height||240,n.play(),n}function f(t){r=[],(t=t||e).forEach((function(e){var t;e.getTracks().filter((function(e){return"video"===e.kind})).length&&((t=p(e)).stream=e,r.push(t))}))}void 0!==a?d.AudioContext=a:"undefined"!=typeof webkitAudioContext&&(d.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){h()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";(t=t instanceof Array?t:[t]).forEach((function(t){var o,n=new c;t.getTracks().filter((function(e){return"video"===e.kind})).length&&((o=p(t)).stream=t,r.push(o),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])),t.getTracks().filter((function(e){return"audio"===e.kind})).length&&(o=s.audioContext.createMediaStreamSource(t),s.audioDestination=s.audioContext.createMediaStreamDestination(),o.connect(s.audioDestination),n.addTrack(s.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])),e.push(n)}))},this.releaseStreams=function(){r=[],o=!0,s.gainNode&&(s.gainNode.disconnect(),s.gainNode=null),s.audioSources.length&&(s.audioSources.forEach((function(e){e.disconnect()})),s.audioSources=[]),s.audioDestination&&(s.audioDestination.disconnect(),s.audioDestination=null),s.audioContext&&s.audioContext.close(),s.audioContext=null,i.clearRect(0,0,n.width,n.height),n.stream&&(n.stream.stop(),n.stream=null)},this.resetVideoStreams=function(e){f(e=!e||e instanceof Array?e:[e])},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){o=!1,f(),"captureStream"in n?i=n.captureStream():"mozCaptureStream"in n?i=n.mozCaptureStream():s.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features"),t=new c,i.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)}));var t,r=n.stream=t,i=function(){d.AudioContextConstructor||(d.AudioContextConstructor=new d.AudioContext),s.audioContext=d.AudioContextConstructor,s.audioSources=[],!0===s.useGainNode&&(s.gainNode=s.audioContext.createGain(),s.gainNode.connect(s.audioContext.destination),s.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var r=s.audioContext.createMediaStreamSource(e);!0===s.useGainNode&&r.connect(s.gainNode),s.audioSources.push(r)}})),t)return s.audioDestination=s.audioContext.createMediaStreamDestination(),s.audioSources.forEach((function(e){e.connect(s.audioDestination)})),s.audioDestination.stream}();return i&&i.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){r.addTrack(e)})),e.forEach((function(e){e.fullcanvas})),r}}function O(e,t){e=e||[];var r,o,n=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var n;r=new B(e,t.elementClass||"multi-streams-mixer"),n=[],e.forEach((function(e){v(e,"video").forEach((function(e){n.push(e)}))})),n.length&&(r.frameInterval=t.frameInterval||10,r.width=t.video.width||360,r.height=t.video.height||240,r.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream()),(o=new R(r.getMixedStream(),t)).record()},this.stop=function(e){o&&o.stop((function(t){n.blob=t,e(t),n.clearRecordedData()}))},this.pause=function(){o&&o.pause()},this.resume=function(){o&&o.resume()},this.clearRecordedData=function(){o&&(o.clearRecordedData(),o=null),r&&(r.releaseStreams(),r=null)},this.addStreams=function(n){if(!n)throw"First parameter is required.";n instanceof Array||(n=[n]),e.concat(n),o&&r&&(r.appendStreams(n),t.previewStream)&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream())},this.resetVideoStreams=function(e){r&&(!e||e instanceof Array||(e=[e]),r.resetVideoStreams(e))},this.getMixer=function(){return r},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function M(e,t){var r,o,n;function i(a,l){t.workerPath||l?(!t.workerPath&&l instanceof ArrayBuffer&&(l=new Blob([l],{type:"text/javascript"}),t.workerPath=c.createObjectURL(l)),t.workerPath||console.error("workerPath parameter is missing."),(o=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),o.addEventListener("message",(function(i){"READY"===i.data?(o.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),new ReadableStream({start:function(o){var n=document.createElement("canvas"),i=document.createElement("video"),s=!0;i.srcObject=e,i.muted=!0,i.height=t.height,i.width=t.width,i.volume=0,i.onplaying=function(){n.width=t.width,n.height=t.height;var e=n.getContext("2d"),a=1e3/t.frameRate,l=setInterval((function(){if(r&&(clearInterval(l),o.close()),s&&(s=!1,t.onVideoProcessStarted)&&t.onVideoProcessStarted(),e.drawImage(i,0,0),"closed"!==o._controlledReadableStream.state)try{o.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),a)},i.play()}}).pipeTo(new WritableStream({write:function(e){r?console.error("Got image, but recorder is finished!"):o.postMessage(e.data.buffer,[e.data.buffer])}}))):i.data&&!n&&s.push(i.data)}))):(r=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(e){e.arrayBuffer().then((function(e){i(a,e)}))})))}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){n=!(s=[]),this.blob=null,i(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){n=!0},this.resume=function(){n=!1};var s=[];this.stop=function(e){r=!0;var t,n=this;t=function(){n.blob=new Blob(s,{type:"video/webm"}),e(n.blob)},o?(o.addEventListener("message",(function(e){null===e.data&&(o.terminate(),o=null,t)&&t()})),o.postMessage(null)):t&&t()},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){n=!(s=[]),this.blob=null},this.blob=null}void 0!==t&&(t.DiskStorage=P),void 0!==t&&(t.GifRecorder=E),void 0===t&&(e.exports=B),void 0!==t&&(t.MultiStreamRecorder=O),void 0!==t&&(t.RecordRTCPromisesHandler=function(e,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new t(e,r),this.startRecording=function(){return new Promise((function(e,t){try{o.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{o.recordRTC.stopRecording((function(r){o.blob=o.recordRTC.getBlob(),o.blob&&o.blob.size?e(r):t("Empty blob.",o.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{o.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{o.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{o.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(o.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(o.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(o.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(o.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(o.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.2"}),void 0!==t&&(t.WebAssemblyRecorder=M)}(nt),nt.exports);const st=ne("<span>Send"),at=ne('<div class="flex items-end justify-between chatbot-input" data-testid="input">'),lt=e=>{const[t,r]=k(e.defaultValue??"");let o;const[n,i]=k(!1),[s,a]=k(),l=e=>r(e),c=()=>{""!==t()&&o?.reportValidity()&&e.onSubmit(t()),r("")},d=e=>{var t=e.isComposing||229===e.keyCode;"Enter"!==e.key||t||c()};async function h(){var t=s();if(t)return await t.stopRecording(),t=await t.getBlob(),i(!1),async function(t){e.setDisabled(!0),t=await(async({speech:e})=>{var t,r=window.speechToTextEndpointUrl;if(r)return(t=new FormData).append("file",e),(await(await fetch(r,{method:"POST",body:t})).json()).transcription;throw new Error("api endpoint url for speech to text is not provided")})({speech:t}),e.onSubmit(t),e.setDisabled(!1)}(t)}R((()=>{e.disabled||Ie()||!o||o.focus()})),T((()=>{!Ie()&&o&&o.focus()}));{const r=at();return r.$$keydown=d,r.style.setProperty("border-top","1px solid #eeeeee"),r.style.setProperty("position","absolute"),r.style.setProperty("left","20px"),r.style.setProperty("right","20px"),r.style.setProperty("bottom","40px"),r.style.setProperty("margin","auto"),r.style.setProperty("z-index","1000"),de(r,q(Ue,{ref(e){"function"==typeof o?o(e):o=e},onInput:l,get value(){return t()},get fontSize(){return e.fontSize},get disabled(){return e.disabled},get placeholder(){return e.placeholder??"Type your question"}}),null),de(r,q(et,{get buttonColor(){return e.sendButtonColor},type:"button",class:"my-2 ml-2","on:click":c,get isRecording(){return n()},onRecordToggle:function(){(n()?h:async function(){var t=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});a(new it.RecordRTCPromisesHandler(t,{type:"audio"})),await(s()?.startRecording()),i(!0),e.setDisabled(!0)})()}}),null),de(r,q(We,{get sendButtonColor(){return e.sendButtonColor},type:"button",get isDisabled(){return e.disabled||""===t()},class:"my-2","on:click":c,get children(){var e=st();return e.style.setProperty("font-family","Poppins, sans-serif"),e}}),null),x((t=>{var o=e.backgroundColor??"#ffffff",n=e.textColor??"#303235";return o!==t._v$&&(null!=(t._v$=o)?r.style.setProperty("background-color",o):r.style.removeProperty("background-color")),n!==t._v$2&&(null!=(t._v$2=n)?r.style.setProperty("color",n):r.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),r}},ct=(ie(["keydown"]),ne('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">')),dt=()=>{{const e=ct(),t=e.firstChild;return x((r=>{var o="flex justify-center items-center rounded-full text-white relative "+(Ie()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),n="absolute top-0 left-0 "+(Ie()?" w-6 h-6 text-sm":"w-full h-full text-xl");return o!==r._v$&&ae(e,r._v$=o),n!==r._v$2&&se(t,"class",r._v$2=n),r}),{_v$:void 0,_v$2:void 0}),e}},ht=ne('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full">'),ut=e=>{const[t,r]=k(e.initialAvatarSrc);return R((()=>{t()?.startsWith("{{")&&e.initialAvatarSrc?.startsWith("http")&&r(e.initialAvatarSrc)})),q(X,{get when(){return(e=>null!=e&&""!==e)(t())},keyed:!0,get fallback(){return q(dt,{})},get children(){const e=ht(),r=e.firstChild;return x((o=>{var n="flex justify-center items-center rounded-full text-white relative flex-shrink-0 "+(Ie()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),i=t();return n!==o._v$&&ae(e,o._v$=n),i!==o._v$2&&se(r,"src",o._v$2=i),o}),{_v$:void 0,_v$2:void 0}),e}})};class pt{source;flags;constructor(e,t=""){this.source=e.source,this.flags=t}setGroup(e,t){let r="string"==typeof t?t:t.source;return r=r.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(e,r),this}getRegexp(){return new RegExp(this.source,this.flags)}}const ft=/[&<>"']/,gt=/[&<>"']/g,mt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bt=/[<>"']|&(?!#?\w+;)/,wt=/[<>"']|&(?!#?\w+;)/g;function vt(e,t){if(t){if(ft.test(e))return e.replace(gt,(e=>mt[e]))}else if(bt.test(e))return e.replace(wt,(e=>mt[e]));return e}function yt(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var kt;(kt=tt=tt||{})[kt.space=1]="space",kt[kt.text=2]="text",kt[kt.paragraph=3]="paragraph",kt[kt.heading=4]="heading",kt[kt.listStart=5]="listStart",kt[kt.listEnd=6]="listEnd",kt[kt.looseItemStart=7]="looseItemStart",kt[kt.looseItemEnd=8]="looseItemEnd",kt[kt.listItemStart=9]="listItemStart",kt[kt.listItemEnd=10]="listItemEnd",kt[kt.blockquoteStart=11]="blockquoteStart",kt[kt.blockquoteEnd=12]="blockquoteEnd",kt[kt.code=13]="code",kt[kt.table=14]="table",kt[kt.html=15]="html",kt[kt.hr=16]="hr";class xt{gfm=!0;tables=!0;breaks=!1;pedantic=!1;sanitize=!1;sanitizer;mangle=!0;smartLists=!1;silent=!1;highlight;langPrefix="lang-";smartypants=!1;headerPrefix="";renderer;xhtml=!1;escape=vt;unescape=yt;isNoP}class Rt{options;constructor(e){this.options=e||Tt.options}code(e,t,r,o){this.options.highlight&&null!=(n=this.options.highlight(e,t))&&n!==e&&(r=!0,e=n);var n=r?e:this.options.escape(e,!0);return t?`\n<pre><code class="${this.options.langPrefix+this.options.escape(t,!0)}">${n}\n</code></pre>\n`:`\n<pre><code>${n}\n</code></pre>\n`}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,r){return`<h${t} id="${this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")}">${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t){return`\n<${t=t?"ol":"ul"}>\n${e}</${t}>\n`}listitem(e){return"<li>"+e+"</li>\n"}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return`\n<table>\n<thead>\n${e}</thead>\n<tbody>\n${t}</tbody>\n</table>\n`}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,r){if(this.options.sanitize){let o;try{o=decodeURIComponent(this.options.unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return r}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return r}let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+">"+r+"</a>"}image(e,t,r){let o='<img src="'+e+'" alt="'+r+'"';return t&&(o+=' title="'+t+'"'),o+(this.options.xhtml?"/>":">")}text(e){return e}}class Ct{staticThis;links;options;static rulesBase=null;static rulesPedantic=null;static rulesGfm=null;static rulesBreaks=null;rules;renderer;inLink;hasRulesGfm;ruleCallbacks;constructor(e,t,r=Tt.options,o){if(this.staticThis=e,this.links=t,this.options=r,this.renderer=o||this.options.renderer||new Rt(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(e,t,r){return new this(this,t,r).output(e)}static getRulesBase(){var e;return this.rulesBase||((e={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/}).link=new pt(e.link).setGroup("inside",e._inside).setGroup("href",e._href).getRegexp(),e.reflink=new pt(e.reflink).setGroup("inside",e._inside).getRegexp(),this.rulesBase=e)}static getRulesPedantic(){return this.rulesPedantic||(this.rulesPedantic={...this.getRulesBase(),strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})}static getRulesGfm(){var e,t,r;return this.rulesGfm||(e=this.getRulesBase(),t=new pt(e.escape).setGroup("])","~|])").getRegexp(),r=new pt(e.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp(),this.rulesGfm={...e,escape:t,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r})}static getRulesBreaks(){var e,t;return this.rulesBreaks||(e=this.getRulesGfm(),t=this.getRulesGfm(),this.rulesBreaks={...t,br:new pt(e.br).setGroup("{2,}","*").getRegexp(),text:new pt(t.text).setGroup("{2,}","*").getRegexp()})}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.url}output(e){let t,r="";for(;e;)if(t=this.rules.escape.exec(e))e=e.substring(t[0].length),r+=t[1];else if(t=this.rules.autolink.exec(e)){let o,n;e=e.substring(t[0].length),n="@"===t[2]?(o=this.options.escape(":"===t[1].charAt(6)?this.mangle(t[1].substring(7)):this.mangle(t[1])),this.mangle("mailto:")+o):o=this.options.escape(t[1]),r+=this.renderer.link(n,null,o)}else if(!this.inLink&&this.hasRulesGfm&&(t=this.rules.url.exec(e))){e=e.substring(t[0].length);var o=this.options.escape(t[1]);r+=this.renderer.link(o,null,o)}else if(t=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(t[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(t[0])&&(this.inLink=!1),e=e.substring(t[0].length),r+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):this.options.escape(t[0]):t[0];else if(t=this.rules.link.exec(e))e=e.substring(t[0].length),this.inLink=!0,r+=this.outputLink(t,{href:t[2],title:t[3]}),this.inLink=!1;else if(t=(t=this.rules.reflink.exec(e))||this.rules.nolink.exec(e)){e=e.substring(t[0].length);o=(t[2]||t[1]).replace(/\s+/g," ");var n=this.links[o.toLowerCase()];n&&n.href?(this.inLink=!0,r+=this.outputLink(t,n),this.inLink=!1):(r+=t[0].charAt(0),e=t[0].substring(1)+e)}else if(t=this.rules.strong.exec(e))e=e.substring(t[0].length),r+=this.renderer.strong(this.output(t[2]||t[1]));else if(t=this.rules.em.exec(e))e=e.substring(t[0].length),r+=this.renderer.em(this.output(t[2]||t[1]));else if(t=this.rules.code.exec(e))e=e.substring(t[0].length),r+=this.renderer.codespan(this.options.escape(t[2].trim(),!0));else if(t=this.rules.br.exec(e))e=e.substring(t[0].length),r+=this.renderer.br();else if(this.hasRulesGfm&&(t=this.rules.del.exec(e)))e=e.substring(t[0].length),r+=this.renderer.del(this.output(t[1]));else if(t=this.rules.text.exec(e))e=e.substring(t[0].length),r+=this.renderer.text(this.options.escape(this.smartypants(t[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return r}outputLink(e,t){var r=this.options.escape(t.href);t=t.title?this.options.escape(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,t,this.output(e[1])):this.renderer.image(r,t,this.options.escape(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/([{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/([{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;let t="";var r=e.length;for(let o=0;o<r;o++){let r;.5<Math.random()&&(r="x"+e.charCodeAt(o).toString(16)),t+="&#"+r+";"}return t}}class St{simpleRenderers=[];tokens;token;inlineLexer;options;renderer;line=0;constructor(e){this.tokens=[],this.token=null,this.options=e||Tt.options,this.renderer=this.options.renderer||new Rt(this.options)}static parse(e,t,r){return new this(r).parse(t,e)}parse(e,t){this.inlineLexer=new Ct(Ct,e,this.options,this.renderer),this.tokens=t.reverse();let r="";for(;this.next();)r+=this.tok();return r}debug(e,t){this.inlineLexer=new Ct(Ct,e,this.options,this.renderer),this.tokens=t.reverse();let r="";for(;this.next();){var o=this.tok();this.token.line=this.line+=o.split("\n").length-1,r+=o}return r}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let e=this.token.text;for(var t;(t=this.getNextElement())&&t.type==tt.text;)e+="\n"+this.next().text;return this.inlineLexer.output(e)}tok(){switch(this.token.type){case tt.space:return"";case tt.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case tt.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case tt.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case tt.listStart:{let t="";for(var e=this.token.ordered;this.next().type!=tt.listEnd;)t+=this.tok();return this.renderer.list(t,e)}case tt.listItemStart:{let e="";for(;this.next().type!=tt.listItemEnd;)e+=this.token.type==tt.text?this.parseText():this.tok();return this.renderer.listitem(e)}case tt.looseItemStart:{let e="";for(;this.next().type!=tt.listItemEnd;)e+=this.tok();return this.renderer.listitem(e)}case tt.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case tt.table:{e="";let o,n="";o="";for(let e=0;e<this.token.header.length;e++){var t={header:!0,align:this.token.align[e]},r=this.inlineLexer.output(this.token.header[e]);o+=this.renderer.tablecell(r,t)}e+=this.renderer.tablerow(o);for(const e of this.token.cells){o="";for(let t=0;t<e.length;t++)o+=this.renderer.tablecell(this.inlineLexer.output(e[t]),{header:!1,align:this.token.align[t]});n+=this.renderer.tablerow(o)}return this.renderer.table(e,n)}case tt.blockquoteStart:{let e="";for(;this.next().type!=tt.blockquoteEnd;)e+=this.tok();return this.renderer.blockquote(e)}case tt.hr:return this.renderer.hr();case tt.html:return e=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text),this.renderer.html(e);default:if(this.simpleRenderers.length)for(let e=0;e<this.simpleRenderers.length;e++)if(this.token.type=="simpleRule"+(e+1))return this.simpleRenderers[e].call(this.renderer,this.token.execArr);if(e=`Token with "${this.token.type}" type was not found.`,!this.options.silent)throw new Error(e);console.log(e)}}}class Tt{static options=new xt;static simpleRenderers=[];static setOptions(e){return Object.assign(this.options,e),this}static setBlockRule(e,t=(()=>"")){return At.simpleRules.push(e),this.simpleRenderers.push(t),this}static parse(e,t){try{t={...this.options,...t};var{tokens:r,links:o}=this.callBlockLexer(e,t);return this.callParser(r,o,t)}catch(e){return this.callMe(e)}}static debug(e,t=this.options){var{tokens:e,links:r}=this.callBlockLexer(e,t);let o=e.slice();return(t=new St(t)).simpleRenderers=this.simpleRenderers,t=t.debug(r,e),{tokens:o=o.map((e=>{e.type=tt[e.type]||e.type;var t=e.line;return delete e.line,t?{line:t,...e}:e})),links:r,result:t}}static callBlockLexer(e="",t){if("string"!=typeof e)throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof e}'`);return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),At.lex(e,t,!0)}static callParser(e,t,r){var o;return this.simpleRenderers.length?((o=new St(r)).simpleRenderers=this.simpleRenderers,o.parse(t,e)):St.parse(e,t,r)}static callMe(e){if(e.message+="\nPlease report this to https://github.com/ts-stack/markdown",this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(e.message+"",!0)+"</pre>";throw e}}class At{staticThis;static simpleRules=[];static rulesBase=null;static rulesGfm=null;static rulesTables=null;rules;options;links={};tokens=[];hasRulesGfm;hasRulesTables;constructor(e,t){this.staticThis=e,this.options=t||Tt.options,this.setRules()}static lex(e,t,r,o){return new this(this,t).getTokens(e,r,o)}static getRulesBase(){var e,t;return this.rulesBase||((e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/}).item=new pt(e.item,"gm").setGroup(/bull/g,e.bullet).getRegexp(),e.list=new pt(e.list).setGroup(/bull/g,e.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+e.def.source+")").getRegexp(),t="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=new pt(e.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,t).getRegexp(),e.paragraph=new pt(e.paragraph).setGroup("hr",e.hr).setGroup("heading",e.heading).setGroup("lheading",e.lheading).setGroup("blockquote",e.blockquote).setGroup("tag","<"+t).setGroup("def",e.def).getRegexp(),this.rulesBase=e)}static getRulesGfm(){var e,t,r,o;return this.rulesGfm||(r=(t={...e=this.getRulesBase(),fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}).fences.source.replace("\\1","\\2"),o=e.list.source.replace("\\1","\\3"),t.paragraph=new pt(e.paragraph).setGroup("(?!",`(?!${r}|${o}|`).getRegexp(),this.rulesGfm=t)}static getRulesTable(){return this.rulesTables||(this.rulesTables={...this.getRulesGfm(),nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table}getTokens(e,t,r){let o,n=e;e:for(;n;)if((o=this.rules.newline.exec(n))&&(n=n.substring(o[0].length),1<o[0].length)&&this.tokens.push({type:tt.space}),o=this.rules.code.exec(n)){n=n.substring(o[0].length);var i=o[0].replace(/^ {4}/gm,"");this.tokens.push({type:tt.code,text:this.options.pedantic?i:i.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(o=this.rules.fences.exec(n)))n=n.substring(o[0].length),this.tokens.push({type:tt.code,meta:o[2],lang:o[3],text:o[4]||""});else if(o=this.rules.heading.exec(n))n=n.substring(o[0].length),this.tokens.push({type:tt.heading,depth:o[1].length,text:o[2]});else if(t&&this.hasRulesTables&&(o=this.rules.nptable.exec(n))){n=n.substring(o[0].length);var s={type:tt.table,header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let e=0;e<s.align.length;e++)/^ *-+: *$/.test(s.align[e])?s.align[e]="right":/^ *:-+: *$/.test(s.align[e])?s.align[e]="center":/^ *:-+ *$/.test(s.align[e])?s.align[e]="left":s.align[e]=null;var a=o[3].replace(/\n$/,"").split("\n");for(let e=0;e<a.length;e++)s.cells[e]=a[e].split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.lheading.exec(n))n=n.substring(o[0].length),this.tokens.push({type:tt.heading,depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(n))n=n.substring(o[0].length),this.tokens.push({type:tt.hr});else if(o=this.rules.blockquote.exec(n))n=n.substring(o[0].length),this.tokens.push({type:tt.blockquoteStart}),i=o[0].replace(/^ *> ?/gm,""),this.getTokens(i),this.tokens.push({type:tt.blockquoteEnd});else if(o=this.rules.list.exec(n)){n=n.substring(o[0].length);var l,c=o[2],d=(this.tokens.push({type:tt.listStart,ordered:1<c.length}),o[0].match(this.rules.item)),h=d.length;let e,t=!1;for(let o=0;o<h;o++){let i=d[o];l=i.length,-1!==(i=i.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=i.length,i=this.options.pedantic?i.replace(/^ {1,4}/gm,""):i.replace(new RegExp("^ {1,"+l+"}","gm"),"")),!this.options.smartLists||o===h-1||c===(l=this.staticThis.getRulesBase().bullet.exec(d[o+1])[0])||1<c.length&&1<l.length||(n=d.slice(o+1).join("\n")+n,o=h-1),e=t||/\n\n(?!\s*$)/.test(i),o!==h-1&&(t="\n"===i.charAt(i.length-1),e=e||t),this.tokens.push({type:e?tt.looseItemStart:tt.listItemStart}),this.getTokens(i,!1,r),this.tokens.push({type:tt.listItemEnd})}this.tokens.push({type:tt.listEnd})}else if(o=this.rules.html.exec(n)){n=n.substring(o[0].length);var u=o[1];this.tokens.push({type:this.options.sanitize?tt.paragraph:tt.html,pre:!this.options.sanitizer&&("pre"===u||"script"===u||"style"===u),text:o[0]})}else if(t&&(o=this.rules.def.exec(n)))n=n.substring(o[0].length),this.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(t&&this.hasRulesTables&&(o=this.rules.table.exec(n))){n=n.substring(o[0].length);var p={type:tt.table,header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let e=0;e<p.align.length;e++)/^ *-+: *$/.test(p.align[e])?p.align[e]="right":/^ *:-+: *$/.test(p.align[e])?p.align[e]="center":/^ *:-+ *$/.test(p.align[e])?p.align[e]="left":p.align[e]=null;var f=o[3].replace(/(?: *\| *)?\n$/,"").split("\n");for(let e=0;e<f.length;e++)p.cells[e]=f[e].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(p)}else{if(this.staticThis.simpleRules.length){var g=this.staticThis.simpleRules;for(let e=0;e<g.length;e++)if(o=g[e].exec(n)){n=n.substring(o[0].length);var m="simpleRule"+(e+1);this.tokens.push({type:m,execArr:o});continue e}}if(t&&(o=this.rules.paragraph.exec(n)))n=n.substring(o[0].length),"\n"===o[1].slice(-1)?this.tokens.push({type:tt.paragraph,text:o[1].slice(0,-1)}):this.tokens.push({type:0<this.tokens.length?tt.paragraph:tt.text,text:o[1]});else if(o=this.rules.text.exec(n))n=n.substring(o[0].length),this.tokens.push({type:tt.text,text:o[0]});else if(n)throw new Error("Infinite loop on byte: "+n.charCodeAt(0)+`, near text '${n.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}const _t=ne('<div class="flex justify-end mb-2 items-end guest-container"><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble" data-testid="guest-bubble">'),Lt=(Tt.setOptions({isNoP:!0}),e=>{let t;T((()=>{t&&(t.innerHTML=Tt.parse(e.message))}));{const r=_t(),o=r.firstChild;r.style.setProperty("margin-left","50px");return"function"==typeof t?ce(t,o):t=o,o.style.setProperty("border-radius","6px"),de(r,q(X,{get when(){return e.showAvatar},get children(){return q(ut,{get initialAvatarSrc(){return e.avatarSrc}})}}),null),x((t=>{var r=e.backgroundColor??"#3B81F6",n=e.textColor??"#ffffff";return r!==t._v$&&(null!=(t._v$=r)?o.style.setProperty("background-color",r):o.style.removeProperty("background-color")),n!==t._v$2&&(null!=(t._v$2=n)?o.style.setProperty("color",n):o.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),r}}),Pt=ne('<svg xmlns="http://www.w3.org/2000/svg" fill="#222" width="1em" height="1em" viewBox="0 0 24 24"><path d="M8,5.14V19.14L19,12.14L8,5.14Z">'),Et=()=>Pt(),Bt=ne('<svg xmlns="http://www.w3.org/2000/svg" fill="#222" width="1em" height="1em" viewBox="0 0 24 24"><path d="M14,19H18V5H14M6,19H10V5H6V19Z">'),Ot=()=>Bt(),Mt=ne('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-2 ml-2 max-w-full chatbot-host-bubble prose" data-testid="host-bubble"></span><div class="place-self-center cursor-pointer ml-2">'),$t=ne('<div class="flex items-center"><div class="w-1 h-1 mr-1 rounded-full bubble1"></div><div class="w-1 h-1 mr-1 rounded-full bubble2"></div><div class="w-1 h-1 rounded-full bubble3">'),Dt=(Tt.setOptions({isNoP:!0}),e=>{let t;const[r,o]=k(!1),[n,i]=k(),[s,a]=k(!1);T((()=>{if(t&&(t.innerHTML=Tt.parse(e.message),e.fileAnnotations)&&e.fileAnnotations.length)for(const n of e.fileAnnotations){var r=document.createElement("button"),o=(r.textContent=n.fileName,r.className="py-2 px-4 mb-2 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 file-annotation-button",r.addEventListener("click",(function(){(async t=>{try{var r=await $e({apiHost:e.apiHost,body:{question:"",history:[],fileName:t.fileName}}),o=new Blob([r.data]),n=window.URL.createObjectURL(o),i=document.createElement("a");i.href=n,i.download=t.fileName,document.body.appendChild(i),i.click(),i.remove()}catch(t){console.error("Download failed:",t)}})(n)})),document.createElement("div"));o.className="ml-2",o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>',r.appendChild(o),t.appendChild(r)}}));let l=new(window.AudioContext||window.webkitAudioContext);async function c(){try{let s;var t;a(!0),n()?s=n():(t=await(async({text:e})=>{var t=window.textToSpeechEndpointUrl;if(t)return Ce({method:"POST",url:t,body:{text:e},type:"blob"});throw new Error("api endpoint url for text to speech is not provided")})({text:e.message}),s=t.data,i((()=>s)));{var r=s;l=new(window.AudioContext||window.webkitAudioContext);const e=new FileReader;return e.onload=function(){var t=e.result;l.decodeAudioData(t,(function(e){var t=l.createBufferSource();t.buffer=e,t.connect(l.destination),t.start(),t.onended=()=>{o(!1)},o(!0)}))},void e.readAsArrayBuffer(r)}}finally{a(!1)}}{const n=Mt(),i=n.firstChild,a=i.nextSibling;n.style.setProperty("margin-right","50px"),de(n,q(X,{get when(){return e.showAvatar},get children(){return q(ut,{get initialAvatarSrc(){return e.avatarSrc}})}}),i);return"function"==typeof t?ce(t,i):t=i,i.style.setProperty("border-radius","6px"),a.$$click=function(){if(r())return async function(){"running"!==l.state&&"suspended"!==l.state||(o(!1),l.suspend())}();c()},de(a,(()=>{const e=C((()=>!!s()));return()=>(e()?$t:()=>{const e=C((()=>!!r()));return()=>e()?q(Ot,{}):q(Et,{})})()})()),x((t=>{var r=e.backgroundColor??"#f7f8ff",o=e.textColor??"#303235";return r!==t._v$&&(null!=(t._v$=r)?i.style.setProperty("background-color",r):i.style.removeProperty("background-color")),o!==t._v$2&&(null!=(t._v$2=o)?i.style.setProperty("color",o):i.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),n}}),Ut=(ie(["click"]),ne('<div class="flex items-center"><div class="w-2 h-2 mr-1 rounded-full bubble1"></div><div class="w-2 h-2 mr-1 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">')),It=()=>Ut(),jt=ne('<div class="flex justify-start mb-2 items-start animate-fade-in host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),Nt=()=>{return de((e=jt()).firstChild,q(It,{})),e;var e},zt=ne('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),qt=e=>{return r=(t=zt()).firstChild,t.$$click=()=>e.onSourceClick?.(),r.style.setProperty("width","max-content"),r.style.setProperty("max-width","80px"),r.style.setProperty("font-size","13px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-overflow","ellipsis"),r.style.setProperty("overflow","hidden"),r.style.setProperty("white-space","nowrap"),de(r,(()=>e.pageContent)),t;var t,r},Ft=(ie(["click"]),ne('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">')),Gt=e=>{return r=(t=Ft()).firstChild,t.$$click=()=>e.onPromptClick?.(),r.style.setProperty("width","max-content"),r.style.setProperty("font-size","15px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("cursor","pointer"),de(r,(()=>e.prompt)),t;var t,r},Ht=(ie(["click"]),ne('<span>Powered by<a href="https://hashthink.com" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span> Hashthink Technology')),Wt="#303235",Vt=e=>{let t,r;const o=r=>{r.forEach((r=>{r.removedNodes.forEach((r=>{"id"in r&&t&&"lite-badge"==r.id&&(console.log("Sorry, you can't remove the brand 😅"),e.botContainer?.append(t))}))}))};T((()=>{document&&e.botContainer&&(r=new MutationObserver(o)).observe(e.botContainer,{subtree:!1,childList:!0})})),A((()=>{r&&r.disconnect()}));{const r=Ht(),o=r.firstChild.nextSibling;r.style.setProperty("font-size","13px"),r.style.setProperty("position","absolute"),r.style.setProperty("bottom","0"),r.style.setProperty("padding","10px"),r.style.setProperty("margin","auto"),r.style.setProperty("width","100%"),r.style.setProperty("text-align","center");return"function"==typeof t?ce(t,o):t=o,o.style.setProperty("font-weight","bold"),x((t=>{var n=e.poweredByTextColor??Wt,i=e.badgeBackgroundColor??"#ffffff",s=e.poweredByTextColor??Wt;return n!==t._v$&&(null!=(t._v$=n)?r.style.setProperty("color",n):r.style.removeProperty("color")),i!==t._v$2&&(null!=(t._v$2=i)?r.style.setProperty("background-color",i):r.style.removeProperty("background-color")),s!==t._v$3&&(null!=(t._v$3=s)?o.style.setProperty("color",s):o.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),r}},Yt=Object.create(null),Jt=(Yt.open="0",Yt.close="1",Yt.ping="2",Yt.pong="3",Yt.message="4",Yt.upgrade="5",Yt.noop="6",Object.create(null)),Xt=(Object.keys(Yt).forEach((e=>{Jt[Yt[e]]=e})),{type:"error",data:"parser error"}),Kt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Qt="function"==typeof ArrayBuffer,Zt=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,er=({type:e,data:t},r,o)=>Kt&&t instanceof Blob?r?o(t):tr(t,o):Qt&&(t instanceof ArrayBuffer||Zt(t))?r?o(t):tr(new Blob([t]),o):o(Yt[e]+(t||"")),tr=(e,t)=>{const r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function rr(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let or;const nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ir="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)ir[nr.charCodeAt(e)]=e;const sr="function"==typeof ArrayBuffer,ar=(e,t)=>{var r;return"string"!=typeof e?{type:"message",data:cr(e,t)}:"b"===(r=e.charAt(0))?{type:"message",data:lr(e.substring(1),t)}:Jt[r]?1<e.length?{type:Jt[r],data:e.substring(1)}:{type:Jt[r]}:Xt},lr=(e,t)=>{var r;return sr?(r=(e=>{let t,r,o,n,i,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2])&&s--;var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<a;t+=4)r=ir[e.charCodeAt(t)],o=ir[e.charCodeAt(t+1)],n=ir[e.charCodeAt(t+2)],i=ir[e.charCodeAt(t+3)],d[l++]=r<<2|o>>4,d[l++]=(15&o)<<4|n>>2,d[l++]=(3&n)<<6|63&i;return c})(e),cr(r,t)):{base64:!0,data:e}},cr=(e,t)=>"blob"!==t?e instanceof ArrayBuffer?e:e.buffer:e instanceof Blob?e:new Blob([e]),dr=String.fromCharCode(30);function hr(){return new TransformStream({transform(e,t){!function(e,t){Kt&&e.data instanceof Blob?e.data.arrayBuffer().then(rr).then(t):Qt&&(e.data instanceof ArrayBuffer||Zt(e.data))?t(rr(e.data)):er(e,!1,(e=>{or=or||new TextEncoder,t(or.encode(e))}))}(e,(r=>{var o,n=r.length;let i;n<126?(i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n)):n<65536?(i=new Uint8Array(3),(o=new DataView(i.buffer)).setUint8(0,126),o.setUint16(1,n)):(i=new Uint8Array(9),(o=new DataView(i.buffer)).setUint8(0,127),o.setBigUint64(1,BigInt(n))),e.data&&"string"!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(r)}))}})}let ur;function pr(e){return e.reduce(((e,t)=>e+t.length),0)}function fr(e,t){if(e[0].length===t)return e.shift();var r=new Uint8Array(t);let o=0;for(let n=0;n<t;n++)r[n]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),r}function gr(e){if(e)return function(e){for(var t in gr.prototype)e[t]=gr.prototype[t];return e}(e)}gr.prototype.on=gr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},gr.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},gr.prototype.off=gr.prototype.removeListener=gr.prototype.removeAllListeners=gr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var r=this._callbacks["$"+e];if(r)if(1==arguments.length)delete this._callbacks["$"+e];else{for(var o,n=0;n<r.length;n++)if((o=r[n])===t||o.fn===t){r.splice(n,1);break}0===r.length&&delete this._callbacks["$"+e]}}return this},gr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(r){o=0;for(var n=(r=r.slice(0)).length;o<n;++o)r[o].apply(this,t)}return this},gr.prototype.emitReserved=gr.prototype.emit,gr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},gr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const mr="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function br(e,...t){return t.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})}const wr=mr.setTimeout,vr=mr.clearTimeout;function yr(e,t){t.useNativeTimers?(e.setTimeoutFn=wr.bind(mr),e.clearTimeoutFn=vr.bind(mr)):(e.setTimeoutFn=mr.setTimeout.bind(mr),e.clearTimeoutFn=mr.clearTimeout.bind(mr))}function kr(e){return"string"==typeof e?function(e){let t,r=0;for(let o=0,n=e.length;o<n;o++)(t=e.charCodeAt(o))<128?r+=1:t<2048?r+=2:t<55296||57344<=t?r+=3:(o++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}class xr extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Rr extends gr{constructor(e){super(),this.writable=!1,yr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new xr(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){e=ar(e,this.socket.binaryType),this.onPacket(e)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){return(e=function(e){let t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e)).length?"?"+e:""}}const Cr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Sr=64,Tr={};let Ar,_r=0,Lr=0;function Pr(e){let t="";for(;t=Cr[e%Sr]+t,0<(e=Math.floor(e/Sr)););return t}function Er(){var e=Pr(+new Date);return e!==Ar?(_r=0,Ar=e):e+"."+Pr(_r++)}for(;Lr<Sr;Lr++)Tr[Cr[Lr]]=Lr;let Br=!1;try{Br="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(kt){}const Or=Br;function Mr(e){e=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Or))return new XMLHttpRequest}catch(e){}if(!e)try{return new(mr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function $r(){}const Dr=null!=new Mr({xdomain:!1}).responseType;class Ur extends gr{constructor(e,t){super(),yr(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e,t=br(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const r=this.xhr=new Mr(t);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var o in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.opts.extraHeaders[o])}catch(e){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null!=(e=this.opts.cookieJar)&&e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&null!=(e=this.opts.cookieJar)&&e.parseCookies(r),4===r.readyState&&(200===r.status||1223===r.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=Ur.requestsCount++,Ur.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=$r,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Ur.requests[this.index],this.xhr=null}}onLoad(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Ur.requestsCount=0,Ur.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Ir);else if("function"==typeof addEventListener){addEventListener("onpagehide"in mr?"pagehide":"unload",Ir,!1)}function Ir(){for(var e in Ur.requests)Ur.requests.hasOwnProperty(e)&&Ur.requests[e].abort()}const jr="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Nr=mr.WebSocket||mr.MozWebSocket,zr="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const qr={websocket:class extends Rr{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=zr?{}:br(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=zr?new Nr(e,t,r):t?new Nr(e,t):new Nr(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){var t=e[r];const o=r===e.length-1;er(t,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(e){}o&&jr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Er()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!Nr}},webtransport:class extends Rr{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((e=>{var t=function(e,t){ur=ur||new TextDecoder;const r=[];let o=0,n=-1,i=!1;return new TransformStream({transform(s,a){for(r.push(s);;){if(0===o){if(pr(r)<1)break;var l=fr(r,1);i=128==(128&l[0]),n=127&l[0],o=n<126?3:126===n?1:2}else if(1===o){if(pr(r)<2)break;l=fr(r,2),n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),o=3}else if(2===o){if(pr(r)<8)break;var c=fr(r,8),d=(c=new DataView(c.buffer,c.byteOffset,c.length)).getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(Xt);break}n=d*Math.pow(2,32)+c.getUint32(4),o=3}else{if(pr(r)<n)break;d=fr(r,n),a.enqueue(ar(i?d:ur.decode(d),t)),o=0}if(0===n||n>e){a.enqueue(Xt);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType);const r=e.readable.pipeThrough(t).getReader();(t=hr()).readable.pipeTo(e.writable),this.writer=t.writable.getWriter();const o=()=>{r.read().then((({done:e,value:t})=>{e||(this.onPacket(t),o())})).catch((e=>{}))};o(),e={type:"open"},this.query.sid&&(e.data=`{"sid":"${this.query.sid}"}`),this.writer.write(e).then((()=>this.onOpen()))}))})))}write(e){this.writable=!1;for(let r=0;r<e.length;r++){var t=e[r];const o=r===e.length-1;this.writer.write(t).then((()=>{o&&jr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null!=(e=this.transport)&&e.close()}},polling:class extends Rr{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){var t="https:"===location.protocol;let r=location.port;r=r||(t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}t=e&&e.forceBase64,this.supportsBinary=Dr&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{var r=e.split(dr),o=[];for(let e=0;e<r.length;e++){var n=ar(r[e],t);if(o.push(n),"error"===n.type)break}return o})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState)&&this.poll()}doClose(){var e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,o=new Array(r);let n=0;e.forEach(((e,i)=>{er(e,!1,(e=>{o[i]=e,++n===r&&t(o.join(dr))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Er()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ur(this.uri(),e)}doWrite(e,t){(e=this.request({method:"POST",data:e})).on("success",t),e.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){var e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},Fr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hr(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));let n=Fr.exec(e||""),i={},s=14;for(;s--;)i[Gr[s]]=n[s]||"";return-1!=r&&-1!=o&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,o){t&&(r[t]=o)})),r}(0,i.query),i}let Wr=class e extends gr{constructor(e,t={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=Hr(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Hr(t.host).host),yr(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){var t={},r=e.split("&");for(let e=0,n=r.length;e<n;e++){var o=r[e].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname)&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(e){var t=((t=Object.assign({},this.opts.query)).EIO=4,t.transport=e,this.id&&(t.sid=this.id),Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]));return new qr[e](t)}open(){let t;if(this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),(this.transport=e).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(t){let r=this.createTransport(t),o=!1;e.priorWebsocketSuccess=!1;const n=()=>{o||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(t=>{o||("pong"===t.type&&"probe"===t.data?(this.upgrading=!0,this.emitReserved("upgrading",r),r&&(e.priorWebsocketSuccess="websocket"===r.name,this.transport.pause((()=>{o||"closed"!==this.readyState&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})))):((t=new Error("probe error")).transport=r.name,this.emitReserved("upgradeError",t)))})))};function i(){o||(o=!0,d(),r.close(),r=null)}const s=e=>{(e=new Error("probe error: "+e)).transport=r.name,i(),this.emitReserved("upgradeError",e)};function a(){s("transport closed")}function l(){s("socket closed")}function c(e){r&&e.name!==r.name&&i()}const d=()=>{r.removeListener("open",n),r.removeListener("error",s),r.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};r.once("open",n),r.once("error",s),r.once("close",a),this.once("close",l),this.once("upgrading",c),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn((()=>{o||r.open()}),200):r.open()}onOpen(){if(this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;for(var t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var e;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(e=this.getWritablePackets(),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length){let t=1;for(let r=0;r<this.writeBuffer.length;r++){var e=this.writeBuffer[r].data;if(e&&(t+=kr(e)),0<r&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,o){"function"==typeof t&&(o=t,t=void 0),"function"==typeof r&&(o=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((r=r||{}).compress=!1!==r.compress,this.emitReserved("packetCreate",e={type:e,data:t,options:r}),this.writeBuffer.push(e),o&&this.once("flush",o),this.flush())}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{(this.upgrading?r:e)()})):(this.upgrading?r:e)()),this}onError(t){e.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){var t=[];let r=0;for(var o=e.length;r<o;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}};Wr.protocol=4;const Vr="function"==typeof ArrayBuffer,Yr=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Jr=Object.prototype.toString,Xr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Jr.call(Blob),Kr="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Jr.call(File);function Qr(e){return Vr&&(e instanceof ArrayBuffer||Yr(e))||Xr&&e instanceof Blob||Kr&&e instanceof File}function Zr(e,t){if(e&&"object"==typeof e)if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(Zr(e[t]))return!0}else{if(Qr(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Zr(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Zr(e[t]))return!0}return!1}function eo(e){var t=[],r=e.data;return e.data=to(r,t),e.attachments=t.length,{packet:e,buffers:t}}function to(e,t){if(!e)return e;var r;if(Qr(e))return r={_placeholder:!0,num:t.length},t.push(e),r;if(Array.isArray(e)){var o=new Array(e.length);for(let r=0;r<e.length;r++)o[r]=to(e[r],t);return o}if("object"!=typeof e||e instanceof Date)return e;var n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=to(e[r],t));return n}function ro(e,t){return e.data=oo(e.data,t),delete e.attachments,e}function oo(e,t){if(e){if(e&&!0===e._placeholder){if("number"==typeof e.num&&0<=e.num&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=oo(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=oo(e[r],t))}return e}const no=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(rt=rt||{});function io(e){return"[object Object]"===Object.prototype.toString.call(e)}class so extends gr{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===rt.BINARY_EVENT;(!r&&t.type!==rt.BINARY_ACK||(t.type=r?rt.EVENT:rt.ACK,this.reconstructor=new ao(t),0===t.attachments))&&super.emitReserved("decoded",t)}else{if(!Qr(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;var r={type:Number(e.charAt(0))};if(void 0===rt[r.type])throw new Error("unknown packet type "+r.type);if(r.type===rt.BINARY_EVENT||r.type===rt.BINARY_ACK){for(var o=t+1;"-"!==e.charAt(++t)&&t!=e.length;);if((o=e.substring(o,t))!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(o=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(o,t)}else r.nsp="/";if(""!==(o=e.charAt(t+1))&&Number(o)==o){for(o=t+1;++t;){var n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}r.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){if(o=this.tryParse(e.substr(t)),!so.isPayloadValid(r.type,o))throw new Error("invalid payload");r.data=o}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case rt.CONNECT:return io(t);case rt.DISCONNECT:return void 0===t;case rt.CONNECT_ERROR:return"string"==typeof t||io(t);case rt.EVENT:case rt.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===no.indexOf(t[0]));case rt.ACK:case rt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ao{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=ro(this.reconPack,this.buffers),this.finishedReconstruction(),e):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var lo=Object.freeze({__proto__:null,Decoder:so,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==rt.EVENT&&e.type!==rt.ACK||!Zr(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===rt.EVENT?rt.BINARY_EVENT:rt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==rt.BINARY_EVENT&&e.type!==rt.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){e=eo(e);var t=this.encodeAsString(e.packet);return(e=e.buffers).unshift(t),e}},get PacketType(){return rt},protocol:5});function co(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const ho=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class uo extends gr{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var e;this.subs||(e=this.io,this.subs=[co(e,"open",this.onopen.bind(this)),co(e,"packet",this.onpacket.bind(this)),co(e,"error",this.onerror.bind(this)),co(e,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(ho.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');var r,o;return t.unshift(e),!this._opts.retries||this.flags.fromQueue||this.flags.volatile?((e={type:rt.EVENT,data:t,options:{}}).options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(r=this.ids++,o=t.pop(),this._registerAckCallback(r,o),e.id=r),o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,(!this.flags.volatile||o&&this.connected)&&(this.connected?(this.notifyOutgoingListeners(e),this.packet(e)):this.sendBuffer.push(e)),this.flags={}):this._addToQueue(t),this}_registerAckCallback(e,t){var r=null!=(r=this.flags.timeout)?r:this._opts.ackTimeout;if(void 0===r)this.acks[e]=t;else{const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,[null,...e])}}}emitWithAck(e,...t){const r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((o,n)=>{t.push(((e,t)=>r?e?n(e):o(t):o(e))),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...o)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t)&&t(e):(this._queue.shift(),t&&t(null,...o)),r.pending=!1,this._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){var t;!this.connected||0===this._queue.length||(t=this._queue[0]).pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:rt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case rt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rt.EVENT:case rt.BINARY_EVENT:this.onevent(e);break;case rt.ACK:case rt.BINARY_ACK:this.onack(e);break;case rt.DISCONNECT:this.ondisconnect();break;case rt.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(const t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...o){r||(r=!0,t.packet({type:rt.ACK,id:e,data:o}))}}onack(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(this._anyListeners)if(e){var t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(this._anyOutgoingListeners)if(e){var t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function po(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}po.prototype.duration=function(){var e,t,r=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*r),r=0==(1&Math.floor(10*e))?r-t:r+t),0|Math.min(r,this.max)},po.prototype.reset=function(){this.attempts=0},po.prototype.setMin=function(e){this.ms=e},po.prototype.setMax=function(e){this.max=e},po.prototype.setJitter=function(e){this.jitter=e};class fo extends gr{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,yr(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(r=t.randomizationFactor)?r:.5),this.backoff=new po({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;var r=t.parser||lo;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null!=(t=this.backoff)&&t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null!=(t=this.backoff)&&t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null!=(t=this.backoff)&&t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(!~this._readyState.indexOf("open")){this.engine=new Wr(this.uri,this.opts);const o=this.engine,n=this,i=(this._readyState="opening",this.skipReconnect=!1,co(o,"open",(function(){n.onopen(),e&&e()}))),s=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()};var t=co(o,"error",s);if(!1!==this._timeout){var r=this._timeout;const e=this.setTimeoutFn((()=>{i(),s(new Error("timeout")),o.close()}),r);this.opts.autoUnref&&e.unref(),this.subs.push((()=>{this.clearTimeoutFn(e)}))}this.subs.push(i),this.subs.push(t)}return this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(co(e,"ping",this.onping.bind(this)),co(e,"data",this.ondata.bind(this)),co(e,"error",this.onerror.bind(this)),co(e,"close",this.onclose.bind(this)),co(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){jr((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new uo(this,e,t),this.nsps[e]=r),r}_destroy(e){for(const e of Object.keys(this.nsps)){if(this.nsps[e].active)return}this._close()}_packet(e){var t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect)||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((()=>{this.clearTimeoutFn(r)}))}}onreconnect(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const go={};function mo(e,t){"object"==typeof e&&(t=e,e=void 0);e=function(e,t="",r){let o=e;return r=r||"undefined"!=typeof location&&location,"string"==typeof(e=null==e?r.protocol+"//"+r.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),o=Hr(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/",e=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host,o.id=o.protocol+"://"+e+":"+o.port+t,o.href=o.protocol+"://"+e+(r&&r.port===o.port?"":":"+o.port),o}(e,(t=t||{}).path||"/socket.io");var r=e.source,o=e.id,n=e.path;n=go[o]&&n in go[o].nsps;let i;return i=(n=t.forceNew||t["force new connection"]||!1===t.multiplex||n)?new fo(r,t):(go[o]||(go[o]=new fo(r,t)),go[o]),e.query&&!t.query&&(t.query=e.queryKey),i.socket(e.path,t)}Object.assign(mo,{Manager:fo,Socket:uo,io:mo,connect:mo});const bo=ne("<style>"),wo=ne('<div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">'),vo=ne("<div><pre>");const yo=e=>{let t;const[r]=V(e,["onOpen","onClose","isOpen","value"]),[o,n]=(T((()=>{t&&(t.innerHTML=function(e){return(e=(e="string"!=typeof e?JSON.stringify(e,void 0,2):e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,(function(e){let t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}(JSON.stringify(e?.value,void 0,2)))})),k(r.isOpen??!1)),i=(R((()=>{xe(e.isOpen)||e.isOpen===o()||a()})),e=>{e.stopPropagation()}),s=()=>{n(!1),r.onClose?.(),document.body.style.overflow="auto"},a=()=>{o()?s():(n(!0),r.onOpen?.(),document.body.style.overflow="hidden")};return q(X,{get when(){return o()},get children(){return[(de(n=bo(),ke),n),(n=wo(),r=n.firstChild,o=r.nextSibling.nextSibling.firstChild.firstChild,n.style.setProperty("z-index","1100"),n.addEventListener("click",s),de(r,ke),o.style.setProperty("background-color","transparent"),o.style.setProperty("margin-left","20px"),o.style.setProperty("margin-right","20px"),o.addEventListener("click",i),o.addEventListener("pointerdown",i),de(o,(()=>{const r=C((()=>!!e.value));return()=>{return r()&&(o=(e=vo()).firstChild,e.style.setProperty("background","white"),e.style.setProperty("margin","auto"),e.style.setProperty("padding","7px"),"function"==typeof(n=t)?ce(n,o):t=o,e);var e,o,n}})()),n)];var r,o,n}})},ko=ne("<div>"),xo=ne('<div><div class="flex w-full h-full justify-center"><div class="overflow-y-scroll min-w-full w-full min-h-full px-3 pt-10 relative scrollable-container chatbot-chat-view scroll-smooth">'),Ro=ne('<span class="px-3 whitespace-pre-wrap font-semibold max-w-full">'),Co=ne("<span>Clear"),So=ne("<div><div>"),To=ne('<div class="w-full h-32">'),Ao="Hi there! How can I help?",_o=e=>{const t=W({showTitle:!0},e);let r,o,n;const[i,s]=k(""),[a,l]=k(!1),[c,d]=k(!1),[h,u]=k({}),[p,f]=k([{message:t.welcomeMessage??Ao,type:"apiMessage"}],{equals:!1}),[g,m]=k(""),[b,w]=k(!1),[v,y]=k(Me()),[S,A]=k([],{equals:!1}),_=(T((()=>{if(e?.observersConfig){const{observeUserInput:t,observeLoading:r,observeMessages:o}=e.observersConfig;"function"==typeof t&&C((()=>{t(i())})),"function"==typeof r&&C((()=>{r(a())})),"function"==typeof o&&C((()=>{o(p())}))}o&&setTimeout((()=>{r?.scrollTo(0,r.scrollHeight)}),50)})),()=>{setTimeout((()=>{r?.scrollTo(0,r.scrollHeight)}),50)}),L=e=>{localStorage.setItem(t.chatflowid+"_EXTERNAL",JSON.stringify({chatId:v(),chatHistory:e}))},P=e=>{f((t=>{var r=t.map(((r,o)=>o===t.length-1?{...r,message:r.message+e}:r));return L(r),[...r]}))},E=e=>{f((t=>{var r=t.map(((r,o)=>o===t.length-1?{...r,sourceDocuments:e}:r));return L(r),[...r]}))},B=async e=>{if(s(e),""!==e.trim()){l(!0),_();const n=t.welcomeMessage??Ao;var r,o=p().filter((e=>e.message!==n));o=(f((t=>(t=[...t,{message:e,type:"userMessage"}],L(t),t))),{question:e,history:o,chatId:v()}),o=(t.chatflowConfig&&(o.overrideConfig=t.chatflowConfig),b()&&(o.socketIOClientId=g()),await(({chatflowid:e,apiHost:t="http://localhost:3000",body:r})=>Ce({method:"POST",url:t+"/api/v1/prediction/"+e,body:r}))({chatflowid:t.chatflowid,apiHost:t.apiHost,body:o}));if(o.data){const e=o.data;if(!b()){let t="";t=e.text||(e.json?JSON.stringify(e.json,null,2):JSON.stringify(e,null,2)),f((r=>(r=[...r,{message:t,sourceDocuments:e?.sourceDocuments,fileAnnotations:e?.fileAnnotations,type:"apiMessage"}],L(r),r)))}l(!1),s(""),_()}o.error&&(o=o.error,console.error(o),o="string"==typeof o?o:o.response.data||o.response.status+": "+o.response.statusText,[r="Oops! There seems to be an error. Please try again."]=[o],f((e=>(e=[...e,{message:r,type:"apiMessage"}],L(e),e))),l(!1),s(""),_())}},O=()=>{try{localStorage.removeItem(t.chatflowid+"_EXTERNAL"),y(Me()),f([{message:t.welcomeMessage??Ao,type:"apiMessage"}])}catch(t){var e=t.response.data||t.response.status+": "+t.response.statusText;console.error("error: "+e)}},M=(R((()=>{p()&&_()})),R((()=>{t.fontSize&&n&&(n.style.fontSize=t.fontSize+"px")})),R((async()=>{var e=((e=localStorage.getItem(t.chatflowid+"_EXTERNAL"))&&(e=JSON.parse(e),y(e.chatId),e=e.chatHistory.map((e=>{var t={message:e.message,type:e.type};return e.sourceDocuments&&(t.sourceDocuments=e.sourceDocuments),e.fileAnnotations&&(t.fileAnnotations=e.fileAnnotations),t})),f([...e])),await(({chatflowid:e,apiHost:t="http://localhost:3000"})=>Ce({method:"GET",url:t+"/api/v1/chatflows-streaming/"+e}))({chatflowid:t.chatflowid,apiHost:t.apiHost})).data;e&&w(e?.isStreaming??!1),e=await(({chatflowid:e,apiHost:t="http://localhost:3000"})=>Ce({method:"GET",url:t+"/api/v1/public-chatbotConfig/"+e}))({chatflowid:t.chatflowid,apiHost:t.apiHost});if(e.data){const t=e.data;if(t.starterPrompts){const e=[];Object.getOwnPropertyNames(t.starterPrompts).forEach((r=>{e.push(t.starterPrompts[r].prompt)})),A(e)}}const r=mo(t.apiHost);return r.on("connect",(()=>{m(r.id)})),r.on("start",(()=>{f((e=>[...e,{message:"",type:"apiMessage"}]))})),r.on("sourceDocuments",E),r.on("token",P),()=>{s(""),l(!1),f([{message:t.welcomeMessage??Ao,type:"apiMessage"}]),r&&(r.disconnect(),m(""))}})),e=>{try{return new URL(e)}catch(e){}}),$=e=>{l(e)};return[(()=>{const e=xo(),s=e.firstChild,l=s.firstChild;var c;return"function"==typeof(c=("function"==typeof(c=n)?ce(c,e):n=e,r))?ce(c,l):r=l,l.style.setProperty("padding-bottom","100px"),l.style.setProperty("padding-top","70px"),de(l,q(J,{get each(){return[...p()]},children:(e,r)=>[C((()=>{const r=C((()=>"userMessage"===e.type));return()=>r()&&q(Lt,{get message(){return e.message},get backgroundColor(){return t.userMessage?.backgroundColor},get textColor(){return t.userMessage?.textColor},get showAvatar(){return t.userMessage?.showAvatar},get avatarSrc(){return t.userMessage?.avatarSrc}})})()),C((()=>{const r=C((()=>"apiMessage"===e.type));return()=>r()&&q(Dt,{get message(){return e.message},get fileAnnotations(){return e.fileAnnotations},get apiHost(){return t.apiHost},get backgroundColor(){return t.botMessage?.backgroundColor},get textColor(){return t.botMessage?.textColor},get showAvatar(){return t.botMessage?.showAvatar},get avatarSrc(){return t.botMessage?.avatarSrc}})})()),C((()=>{const t=C((()=>!("userMessage"!==e.type||!a()||r()!==p().length-1)));return()=>t()&&q(Nt,{})})()),C((()=>{const t=C((()=>!(!e.sourceDocuments||!e.sourceDocuments.length)));return()=>{return t()&&((r=ko()).style.setProperty("display","flex"),r.style.setProperty("flex-direction","row"),r.style.setProperty("width","100%"),de(r,q(J,{get each(){return[...(e=>{const t=[],r=[];return e.sourceDocuments.forEach((e=>{M(e.metadata.source)&&!t.includes(e.metadata.source)?(t.push(e.metadata.source),r.push(e)):M(e.metadata.source)||r.push(e)})),r})(e)]},children:e=>{const t=M(e.metadata.source);return q(qt,{get pageContent(){return t?t.pathname:e.pageContent},get metadata(){return e.metadata},onSourceClick:()=>{t?window.open(e.metadata.source,"_blank"):(u(e),d(!0))}})}})),r);var r}})())]})),de(s,(()=>{const e=C((()=>!!t.showTitle));return()=>{if(e()){const e=So(),r=e.firstChild;return e.style.setProperty("display","flex"),e.style.setProperty("flex-direction","row"),e.style.setProperty("align-items","center"),e.style.setProperty("height","50px"),e.style.setProperty("position","absolute"),e.style.setProperty("top","0"),e.style.setProperty("left","0"),e.style.setProperty("width","100%"),de(e,q(X,{get when(){return t.titleAvatarSrc},get children(){return[((e=ko()).style.setProperty("width","15px"),e),q(ut,{get initialAvatarSrc(){return t.titleAvatarSrc}})];var e}}),r),de(e,q(X,{get when(){return t.title},get children(){var e=Ro();return de(e,(()=>t.title)),e}}),r),r.style.setProperty("flex","1"),de(e,q(Ve,{get sendButtonColor(){return t.bubbleTextColor},type:"button",get isDisabled(){return 1===p().length},class:"my-2 ml-2","on:click":O,get children(){var e=Co();return e.style.setProperty("font-family","Poppins, sans-serif"),e}}),null),x((r=>{var o=t.bubbleBackgroundColor,n=t.bubbleTextColor,i=t.isFullPage?"0px":"6px",s=t.isFullPage?"0px":"6px";return o!==r._v$&&(null!=(r._v$=o)?e.style.setProperty("background",o):e.style.removeProperty("background")),n!==r._v$2&&(null!=(r._v$2=n)?e.style.setProperty("color",n):e.style.removeProperty("color")),i!==r._v$3&&(null!=(r._v$3=i)?e.style.setProperty("border-top-left-radius",i):e.style.removeProperty("border-top-left-radius")),s!==r._v$4&&(null!=(r._v$4=s)?e.style.setProperty("border-top-right-radius",s):e.style.removeProperty("border-top-right-radius")),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e}return null}})(),null),de(s,q(lt,{get backgroundColor(){return t.textInput?.backgroundColor},get textColor(){return t.textInput?.textColor},get placeholder(){return t.textInput?.placeholder},get sendButtonColor(){return t.textInput?.sendButtonColor},get fontSize(){return t.fontSize},get disabled(){return a()},get defaultValue(){return i()},onSubmit:B,setDisabled:$}),null),de(e,q(X,{get when(){return 1===p().length},get children(){return q(X,{get when(){return 0<S().length},get children(){var e=ko();return e.style.setProperty("display","flex"),e.style.setProperty("flex-direction","row"),e.style.setProperty("padding","10px"),e.style.setProperty("width","100%"),e.style.setProperty("flex-wrap","wrap"),de(e,q(J,{get each(){return[...S()]},children:e=>q(Gt,{prompt:e,onPromptClick:()=>{B(e)}})})),e}})}}),null),de(e,q(Vt,{get badgeBackgroundColor(){return t.badgeBackgroundColor},get poweredByTextColor(){return t.poweredByTextColor},botContainer:n}),null),de(e,q(Lo,{ref(e){"function"==typeof o?o(e):o=e}}),null),x((()=>ae(e,"relative flex w-full h-full text-base overflow-hidden bg-cover bg-center flex-col items-center chatbot-container "+t.class))),e})(),C((()=>{const e=C((()=>!!c()));return()=>e()&&q(yo,{get isOpen(){return c()},get value(){return h()},onClose:()=>d(!1)})})())]},Lo=e=>{return t=To(),"function"==typeof(r=e.ref)?ce(r,t):e.ref=t,t;var t,r},Po=ne("<style>"),Eo=ne('<div part="bot">'),Bo=e=>{const[t]=V(e,["theme"]),[r,o]=k(!1),[n,i]=k(!1);var s;return[(de(s=Po(),ke),s),q(_e,W((()=>t.theme?.button),{toggleBot:()=>{r()?o(!1):(n()||i(!0),o(!0))},get isBotOpened(){return r()}})),(()=>{const o=Eo();return o.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),o.style.setProperty("transform-origin","bottom right"),o.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),o.style.setProperty("z-index","42424242"),de(o,q(X,{get when(){return n()},get children(){return q(_o,{get badgeBackgroundColor(){return t.theme?.chatWindow?.backgroundColor},get bubbleBackgroundColor(){return t.theme?.button?.backgroundColor??"#3B81F6"},get bubbleTextColor(){return t.theme?.button?.iconColor??"white"},get showTitle(){return t.theme?.chatWindow?.showTitle},get title(){return t.theme?.chatWindow?.title},get titleAvatarSrc(){return t.theme?.chatWindow?.titleAvatarSrc},get welcomeMessage(){return t.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return t.theme?.chatWindow?.poweredByTextColor},get textInput(){return t.theme?.chatWindow?.textInput},get botMessage(){return t.theme?.chatWindow?.botMessage},get userMessage(){return t.theme?.chatWindow?.userMessage},get fontSize(){return t.theme?.chatWindow?.fontSize},get chatflowid(){return e.chatflowid},get chatflowConfig(){return e.chatflowConfig},get apiHost(){return e.apiHost},get observersConfig(){return e.observersConfig}})}})),x((n=>{var i=t.theme?.chatWindow?.height?t.theme?.chatWindow?.height.toString()+"px":"calc(100% - 100px)",s=r()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",a=t.theme?.chatWindow?.backgroundColor||"#ffffff",l="fixed sm:right-5 rounded-lg w-full sm:w-[400px] max-h-[704px]"+(r()?" opacity-1":" opacity-0 pointer-events-none")+("large"===e.theme?.button?.size?" bottom-24":" bottom-20");return i!==n._v$&&(null!=(n._v$=i)?o.style.setProperty("height",i):o.style.removeProperty("height")),s!==n._v$2&&(null!=(n._v$2=s)?o.style.setProperty("transform",s):o.style.removeProperty("transform")),a!==n._v$3&&(null!=(n._v$3=a)?o.style.setProperty("background-color",a):o.style.removeProperty("background-color")),l!==n._v$4&&ae(o,n._v$4=l),n}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),o})()]},Oo=ne("<style>"),Mo=ne("<div>"),$o=(e,{element:t})=>{const[r,o]=k(!1),n=new IntersectionObserver((e=>{e.some((e=>e.isIntersecting))&&o(!0)}));return T((()=>{n.observe(t)})),A((()=>{n.disconnect()})),[(de(i=Oo(),ke),i),q(X,{get when(){return r()},get children(){const t=Mo();return t.style.setProperty("margin","0px"),de(t,q(_o,{get badgeBackgroundColor(){return e.theme?.chatWindow?.backgroundColor},get bubbleBackgroundColor(){return e.theme?.button?.backgroundColor??"#3B81F6"},get bubbleTextColor(){return e.theme?.button?.iconColor??"white"},get showTitle(){return e.theme?.chatWindow?.showTitle},get title(){return e.theme?.chatWindow?.title},get titleAvatarSrc(){return e.theme?.chatWindow?.titleAvatarSrc},get welcomeMessage(){return e.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return e.theme?.chatWindow?.poweredByTextColor},get textInput(){return e.theme?.chatWindow?.textInput},get botMessage(){return e.theme?.chatWindow?.botMessage},get userMessage(){return e.theme?.chatWindow?.userMessage},get fontSize(){return e.theme?.chatWindow?.fontSize},get chatflowid(){return e.chatflowid},get chatflowConfig(){return e.chatflowConfig},get apiHost(){return e.apiHost},isFullPage:!0,get observersConfig(){return e.observersConfig}})),x((r=>{var o=e.theme?.chatWindow?.backgroundColor||"#ffffff",n=e.theme?.chatWindow?.height?e.theme?.chatWindow?.height.toString()+"px":"100vh",i=e.theme?.chatWindow?.width?e.theme?.chatWindow?.width.toString()+"px":"100%";return o!==r._v$&&(null!=(r._v$=o)?t.style.setProperty("background-color",o):t.style.removeProperty("background-color")),n!==r._v$2&&(null!=(r._v$2=n)?t.style.setProperty("height",n):t.style.removeProperty("height")),i!==r._v$3&&(null!=(r._v$3=i)?t.style.setProperty("width",i):t.style.removeProperty("width")),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t}})];var i},Do=e=>{window.speechToTextEndpointUrl=e.speechToTextEndpointUrl,window.textToSpeechEndpointUrl=e.textToSpeechEndpointUrl;var t=e.id?document.getElementById(e.id):document.querySelector("flowise-fullchatbot");if(!t)throw new Error("<flowise-fullchatbot> element not found.");Object.assign(t,e)},Uo=e=>{window.speechToTextEndpointUrl=e.speechToTextEndpointUrl,window.textToSpeechEndpointUrl=e.textToSpeechEndpointUrl;var t=document.createElement("flowise-chatbot");Object.assign(t,e),document.body.appendChild(t)},Io=("undefined"!=typeof window&&(ve("flowise-fullchatbot",ye,$o),ve("flowise-chatbot",ye,Bo)),{initFull:Do,init:Uo});(e=>{"undefined"!=typeof window&&(window.Chatbot={...e})})(Io);export{Io as default};
